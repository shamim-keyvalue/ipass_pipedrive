{"id":29428,"name":"testing-pipedriveLayout","userId":27893,"accountId":24428,"createdDate":"2019-09-05T07:14:04Z","steps":[{"id":216443,"onSuccess":[],"onFailure":[],"name":"Success","type":"script","properties":{"body":"let layout = {\n  \"logo\":\"/third_party/cn-pipedrive.jpeg\",\n  \"integDispName\":\"Pipedrive\",\n  \"subStepList\":[\n     {\n        \"stepName\":\"Connect\",\n        \"stepId\":\"connect\",\n        \"apiEndPoint\": {\n           \"type\": \"GET\",\n           \"headers\": {\n              \"Elements-Formula-Instance-Id\": \"399733\"\n           },\n           \"apiUrl\": \"https://staging.cloud-elements.com/elements/api-v2/pipedrive/connect\",\n           \"input\": {\n             \"integrationName\": \"pipedrive\",\n             \"chargebeeElement\": \"19681\",\n             \"thirdPartyElement\": \"19739\",\n             \"formula_SyncRulesContactsSetup\": \"29400\",\n             \"formula_SyncRulesContactsConfig\": \"29403\",\n             \"formula_SyncRulesDealsSetup\": \"29405\",\n             \"formula_SyncRulesDealsConfig\": \"29406\",\n             \"formula_SyncFieldsSetup\": \"29407\",\n             \"formula_SyncFieldsConfig\": \"29408\",\n             \"formula_ValidateSetup\": \"29409\",\n             \"formula_ValidateIgnore\": \"29411\",\n             \"formula_ValidateResult\": \"29410\",\n             \"formula_InitialSyncRun\": \"29412\",\n             \"formula_FullSyncRun\": \"29413\",\n             \"formula_SyncDispatcher\": \"29414\",\n             \"formula_SyncCustomers\": \"29415\",\n             \"formula_SyncSubscription\": \"30443\",\n             \"formula_SyncInvoice\": \"30458\",\n             \"formula_GetPipelineStages\": \"29421\",\n             \"formula_GetRefreshToken\": \"29422\",\n             \"formula_ManageSyncRules_Save\": \"29427\",\n             \"formula_backStepApi\": \"29429\",\n             \"instance_SyncRulesContactsSetup\": \"399735\",\n             \"instance_SyncRulesDealsSetup\": \"399736\",\n             \"instance_SyncFieldsSetup\": \"399737\",\n             \"instance_ValidateSetup\": \"399738\",\n             \"instance_InitialSyncRun\": \"399739\",\n             \"instance_FullSyncRun\": \"399740\",\n             \"instance_manageSyncRules\": \"399741\",\n             \"instance_GetPipelineStages\": \"400692\"\n           }\n        }\n     },\n     {\n        \"stepName\":\"Sync Rules for Contacts\",\n        \"stepId\":\"step_1\",\n        \"apiEndPoint\": {\n           \"type\":\"GET\",\n           \"headers\": {\n                   \"Elements-Formula-Instance-Id\": \"399735\"\n           },\n           \"apiUrl\":\"https://staging.cloud-elements.com/elements/api-v2/pipedrive/syncRulesContactsSetup\",\n           \"input\": {\n             \"integrationName\": \"pipedrive\",\n             \"OAuthProcessComplete\" : \"true\"\n           }\n        },\n        \"backStepApiEndPoint\": {\n           \"type\":\"GET\",\n           \"apiUrl\":\"https://staging.cloud-elements.com/elements/api-v2/getBackStep\",\n            \"headers\": {\n                   \"Elements-Formula-Instance-Id\": \"399734\"\n           },\n            \"input\": {\n             \"integrationName\": \"pipedrive\"\n           }\n        }\n     },\n     {\n        \"stepName\":\"Sync Rules for Deals\",\n        \"stepId\":\"step_2\",\n        \"apiEndPoint\": {\n           \"type\":\"GET\",\n           \"headers\": {\n                   \"Elements-Formula-Instance-Id\": \"399736\"\n           },\n           \"apiUrl\":\"https://staging.cloud-elements.com/elements/api-v2/pipedrive/syncRulesDealsSetup\"\n        },\n        \"backStepApiEndPoint\": {\n           \"type\":\"GET\",\n           \"apiUrl\":\"https://staging.cloud-elements.com/elements/api-v2/getBackStep\",\n            \"headers\": {\n                   \"Elements-Formula-Instance-Id\": \"399734\"\n           },\n            \"input\": {\n             \"backStep\" : \"true\",\n             \"integrationName\": \"pipedrive\"\n           }\n        }\n     },\n     {\n        \"stepName\":\"Sync Fields\",\n        \"stepId\":\"step_3\",\n        \"apiEndPoint\": {\n           \"type\":\"GET\",\n           \"headers\": {\n                   \"Elements-Formula-Instance-Id\": \"399737\"\n           },\n           \"apiUrl\":\"https://staging.cloud-elements.com/elements/api-v2/pipedrive/syncFieldsSetup\"\n        },\n        \"backStepApiEndPoint\": {\n           \"type\":\"GET\",\n           \"apiUrl\":\"https://staging.cloud-elements.com/elements/api-v2/getBackStep\",\n            \"headers\": {\n                   \"Elements-Formula-Instance-Id\": \"399734\"\n           },\n            \"input\": {\n             \"integrationName\": \"pipedrive\"\n           }\n        }\n     },\n     {\n        \"stepName\":\"Data Validation\",\n        \"stepId\":\"step_4\",\n        \"apiEndPoint\": {\n           \"type\":\"GET\",\n           \"headers\": {\n              \"Elements-Formula-Instance-Id\": \"399738\"\n           },\n           \"apiUrl\":\"https://staging.cloud-elements.com/elements/api-v2/pipedrive/validateSetup\",\n           \"input\": {\n             \"integrationName\": \"pipedrive\",\n             \"retry\" : \"false\"\n           }\n        },\n        \"backStepApiEndPoint\": {\n           \"type\":\"GET\",\n           \"apiUrl\":\"https://staging.cloud-elements.com/elements/api-v2/getBackStep\",\n            \"headers\": {\n                   \"Elements-Formula-Instance-Id\": \"399734\"\n           },\n            \"input\": {\n             \"integrationName\": \"pipedrive\"\n           }\n        }\n     },\n     {\n        \"stepName\":\"Run Initial Sync\",\n        \"stepId\":\"step_5\",\n        \"apiEndPoint\": {\n           \"type\":\"GET\",\n           \"headers\": {\n              \"Elements-Formula-Instance-Id\": \"399739\"\n           },\n           \"apiUrl\":\"https://staging.cloud-elements.com/elements/api-v2/pipedrive/initialSyncRun\",\n           \"input\": {\n             \"integrationName\": \"pipedrive\",\n             \"action\": \"default\",\n             \"initialSync\": \"true\"\n           }\n        },\n        \"backStepApiEndPoint\": {\n           \"type\":\"GET\",\n           \"apiUrl\":\"https://staging.cloud-elements.com/elements/api-v2/getBackStep\",\n            \"headers\": {\n                   \"Elements-Formula-Instance-Id\": \"399734\"\n           },\n            \"input\": {\n             \"integrationName\": \"pipedrive\"\n           }\n        }\n     },\n     {\n        \"stepName\":\"Final step\",\n        \"stepId\":\"completed\",\n        \"apiEndPoint\": {\n           \"type\":\"GET\",\n           \"headers\": {\n              \"Elements-Formula-Instance-Id\": \"399740\"\n           },\n           \"apiUrl\":\"https://staging.cloud-elements.com/elements/api-v2/pipedrive/fullSyncRun\",\n           \"input\": {\n             \"integrationName\": \"pipedrive\",\n             \"initialSync\": \"false\",\n             \"isFromLayout\" : \"true\",\n             \"syncNow\" : \"default\"\n           }\n        },\n        \"fullSyncApiEndPoint\": {\n            \"type\":\"GET\",\n            \"apiUrl\":\"https://staging.cloud-elements.com/elements/api-v2/autoSync\",\n            \"headers\": {\n                \"Elements-Formula-Instance-Id\": \"401131\"\n            },\n            \"input\": {\n                \"integrationName\": \"pipedrive\"\n            }\n         },\n         \"editConfig\": {\n               \"title\": \"Manage how Chargebee syncs data with Pipedrive\",\n               \"display\": \"Manage Sync Rules\",\n               \"apiEndPoint\": {\n                   \"type\": \"GET\",\n                   \"apiUrl\": \"https://staging.cloud-elements.com/elements/api-v2/pipedrive/manageSyncRules\",\n                   \"headers\": {\n                       \"Elements-Formula-Instance-Id\": \"399741\"\n                   },\n                   \"input\": {\n                       \"integrationName\": \"pipedrive\",\n                       \"op\": \"edit\"\n                   }\n               }\n           }\n     }\n  ]\n}\n\n\n//temporary config for batching development\n// if(trigger.args.request.query['cb-site-name'] === \"actcamp-test\"){\n  layout.subStepList[0].apiEndPoint.input.formula_SyncDispatcher = \"30756\";\n  layout.subStepList[0].apiEndPoint.input.formula_SyncCustomers = \"30753\";\n  layout.subStepList[0].apiEndPoint.input.formula_SyncSubscription = \"30754\";\n  layout.subStepList[0].apiEndPoint.input.formula_SyncInvoice = \"30755\";\n// }\n//--------\n\n\ndone({\n statusCode: 200,\n result: layout\n});"}}],"triggers":[{"id":26055,"onSuccess":["Success"],"onFailure":[],"type":"manual","async":true,"name":"trigger","properties":{}}],"method":"GET","uri":"/pipedrive/layout","engine":"v1","active":true,"debugLoggingEnabled":true,"singleThreaded":false,"api":"GET /pipedrive/layout","configuration":[]}