{"id":29405,"name":"testing-pipedriveSyncRulesDealsSetup","userId":27893,"accountId":24428,"createdDate":"2019-09-05T06:58:19Z","steps":[{"id":215701,"onSuccess":["checkExecutionStatus_getNewAccessToken"],"onFailure":[],"name":"accessTokenFormulaDetails","type":"script","properties":{"body":"let formulaExecutionDetails;\n\nif(steps.getNewAccessToken !== undefined){\n  formulaExecutionDetails = {\n  \"excecutionId\":steps.getNewAccessToken.response.body[0].id,\n  \"instance\": steps.triggerRefreshToken.instanceId,\n  \"formula\": \"974\"\n  };\n}else{\n  formulaExecutionDetails = {\n    \"excecutionId\":steps.InputParams.params.input.tokenUpdateExecutionId\n  };\n}\n\n\nlet checkStatusParams = {\n  url: \"/formulas/instances/executions/\"+ formulaExecutionDetails.excecutionId\n};\n\ndone({\n  formulaExecutionDetails: formulaExecutionDetails,\n  checkStatusParams: checkStatusParams\n});\n\n"}},{"id":222874,"onSuccess":["loopOverPipelines"],"onFailure":[],"name":"addStagesToList","type":"script","properties":{"body":"let stagesData;\nlet temp;\nlet outputData = [];\n\nif((steps.getStagesFromPipedrive.response.code !== 200) || (steps.getStagesFromPipedrive.response.body.data === undefined) || (steps.getStagesFromPipedrive.response.body.data.length === 0)){\n  \n  if((steps.getStagesFromPipedrive_params.stageList !== undefined) && (steps.getStagesFromPipedrive_params.stageList.length !== 0)){\n      stagesData = steps.getStagesFromPipedrive_params.stageList;\n      done({\n        stages: stagesData\n      });\n  }\n  done(false);\n}\n\n\nstagesData = steps.getStagesFromPipedrive.response.body.data;\n\nfor(var i=0; i < stagesData.length; i++){\n  if(stagesData[i].active_flag === false){\n    continue;\n  }\n  \n temp = {\n    \"value\": stagesData[i].id,\n    \"disp\": stagesData[i].name\n   };\n   outputData.push(temp);\n}\n\nif(steps.getStagesFromPipedrive_params.stageList.length !== 0){\n  let stageData = steps.getStagesFromPipedrive_params.stageList;\n  stageData.push(outputData);\n  done({\n    stages: stageData\n  });\n}\n\n\ndone({\n  stages: [outputData]\n});"}},{"id":215702,"onSuccess":["accessTokenFormulaDetails"],"onFailure":["triggerRefreshToken"],"name":"alreadyExecutionExist","type":"filter","properties":{"body":"if(steps.InputParams.params.input.tokenUpdateExecutionId !== null){\n  done(true);\n}\n\ndone(false);"}},{"id":215703,"onSuccess":["executionStatus_getNewAccessToken"],"onFailure":[],"name":"checkExecutionStatus_getNewAccessToken","type":"request","properties":{"method":"GET","api":"${steps.accessTokenFormulaDetails.checkStatusParams.url}"}},{"id":226246,"onSuccess":["isInstanceExist"],"onFailure":[],"name":"checkInstanceExist","type":"script","properties":{"body":"let instances=steps.getInstances.response.body;\nlet siteName= steps.InputParams.params.input.siteName;\nlet bodyParam=steps.formulaInformation;\n\nlet flag = false;\nlet instanceInfo = '';\nlet formulaNames = \"formula_GetRefreshToken\";\n  \nlet instanceNames = bodyParam.formula_GetRefreshToken.name;\n\nlet param = bodyParam.formula_GetRefreshToken;\n\n\nfor(var i=0;i<instances.length;i++){\n  if(instances[i].name === instanceNames){\n    flag = true;\n    instanceInfo =  instances[i];\n    formulaName = formulaNames;\n    break;\n  }\n}\n\nif(flag === false){\n  done({\n    flag: false,\n    formulaName : formulaNames,\n    instanceInfo: param\n  });\n}\n\nif(flag === true){\n  done({\n    flag: true,\n    formulaName : formulaNames,\n    instanceInfo: instanceInfo\n  });\n}"}},{"id":215704,"onSuccess":["getResultAccessToken"],"onFailure":[],"name":"createDelay","type":"httpRequest","properties":{"method":"GET","url":"${steps.delayExecution.payload.url}","headers":"${steps.delayExecution.payload.headers}"}},{"id":226249,"onSuccess":["newInstanceCreatedInfo"],"onFailure":[],"name":"createFormulaInstance","type":"request","properties":{"method":"POST","api":"${steps.createFormulaInstanceParams.createInstanceConfig.url}","body":"${steps.createFormulaInstanceParams.createInstanceConfig.body}"}},{"id":226248,"onSuccess":["createFormulaInstance"],"onFailure":[],"name":"createFormulaInstanceParams","type":"script","properties":{"body":"let formulaId = steps.formulaInformation.formulaId || null;\n\n\nlet createInstanceConfig = {\n  url: \"/formulas/\"+formulaId+\"/instances\",\n  body: steps.checkInstanceExist.instanceInfo\n};\n\n\ndone({\n  createInstanceConfig: createInstanceConfig\n});\n\n\n"}},{"id":215705,"onSuccess":["createDelay"],"onFailure":[],"name":"delayExecution","type":"script","properties":{"body":"let payload = {\n  url: \"https://api.cloud-elements.co.uk/elements/api-v2/createDelay\",\n  headers:{\n    \"authorization\": \"User 0d44SS3tYoGuwakQcpXX3pya/oy0k2duFVqQ6WJMZTg=, Organization 705f11c2b0c933ebde1cf6bc5b26bdf7\",\n    \"Elements-Formula-Instance-Id\": \"961\"\n  }\n};\n\ndone({\n  payload: payload\n});"}},{"id":219846,"onSuccess":["InputParams"],"onFailure":[],"name":"EnvProps","type":"script","properties":{"body":"let cloudElementsUrl = \"https://staging.cloud-elements.com/elements/api-v2\";\n\ndone({\n  cloudElementsUrl: cloudElementsUrl\n});"}},{"id":215706,"onSuccess":[],"onFailure":[],"name":"Error","type":"script","properties":{"body":"let cloudElementsUrl = steps.EnvProps.cloudElementsUrl;\n\nlet card = {\n    \"cards\": [{\n        \"id\": \"testdynamic2\",\n        \"isCardDone\" : true,\n        \"card\": {\n            \"type\": \"ACTION\",\n            \"heading\": \"Integration Error:  Initialization Failed\",\n            \"listContent\": [\n                \"Integration Error:  Initialization Failed\"\n            ],\n            \"icon\": \"ERROR\"\n        }\n    }],\n    \"retry\": {\n      \"buttonLook\": \"FILLED\",\n      \"display\": \"Resolve\",\n      \"icon\": \"ARROW\",\n      \"id\": \"retry\",\n     \n      \"request\": {\n        \"apiEndPoint\": {\n          \"apiUrl\": cloudElementsUrl+\"/pipedrive/syncRulesDealsSetup\",\n          \"headers\": {\n            \"Elements-Formula-Instance-Id\": info.formulaInstanceId\n          },\n          \"input\": {\n            \"siteDomain\": steps.InputParams.params.input.siteDomain,\n            \"integrationName\": steps.InputParams.params.input.integrationName\n          },\n          \"type\": \"GET\"\n        },\n        \"type\": \"ON_CLICK_DEFAULT_ACTION\"\n      },\n      \"type\": \"DIRECT_LINK\"\n    }\n}\n\n\nif(steps.getPipelinesFromPipedrive.response.code === 401){\n  card.cards[0].card.heading = \"Error\";\n  card.cards[0].card.listContent = [\"Pipedrive Access Token Expired\"];\n}\n\ndone({\n  statusCode: 200,\n  result: card\n})"}},{"id":215707,"onSuccess":["isAccessTokenFormulaDone"],"onFailure":[],"name":"executionStatus_getNewAccessToken","type":"script","properties":{"body":"let executionData = {};\n\nif(steps.checkExecutionStatus_getNewAccessToken.response.body.status === undefined) {\n  executionData.status = \"failed\";\n}else if(steps.checkExecutionStatus_getNewAccessToken.response.body.status === \"failed\"){\n  executionData.status = \"failed\";\n}else if(steps.checkExecutionStatus_getNewAccessToken.response.body.status === \"success\"){\n  executionData.status = \"succeeded\";\n  for(var i=0;i<=steps.checkExecutionStatus_getNewAccessToken.response.body.stepExecutions.length;i++){\n    if(steps.checkExecutionStatus_getNewAccessToken.response.body.stepExecutions[i][\"stepName\"] === \"Success\") {\n      executionData.result = steps.checkExecutionStatus_getNewAccessToken.response.body.stepExecutions[i];\n      break;\n    }\n    \n    if(steps.checkExecutionStatus_getNewAccessToken.response.body.stepExecutions[i][\"stepName\"] === \"Failed\") {\n      executionData.result = steps.checkExecutionStatus_getNewAccessToken.response.body.stepExecutions[i];\n      executionData.status = \"failed\";\n      break;\n    }\n  }\n}else if(steps.checkExecutionStatus_getNewAccessToken.response.body.status === \"pending\"){\n  executionData.status = \"running\";\n}\n\ndone({\n  executionData: executionData\n});"}},{"id":215708,"onSuccess":[],"onFailure":[],"name":"Failed","type":"script","properties":{"body":"let card = {\n \"status\": \"error\",\n \"notice\" : \"Invalid Fields Selected for Mapping.\"\n};\n\ndone({\n  statusCode: 200,\n  result: card\n});"}},{"id":215709,"onSuccess":[],"onFailure":[],"name":"failedToGetAccessToken","type":"script","properties":{"body":"done({\n  message : \"Failed to Get New Access Token\"\n});"}},{"id":226244,"onSuccess":["getInstances"],"onFailure":[],"name":"formulaInformation","type":"script","properties":{"body":"let siteName = steps.InputParams.params.input.siteName;\n\nlet formula_GetRefreshToken = steps.getTpConfig.response.body.third_party_configuration.config_json.cloudElements.formulas.formula_GetRefreshToken.id;\n\ndone({\n  formula_GetRefreshToken:{\n    active: true,\n    configuration: {},\n    name: siteName + \"-GetRefreshToken\"\n  },\n  formulaId:formula_GetRefreshToken\n});"}},{"id":215710,"onSuccess":["getResultAccessToken"],"onFailure":[],"name":"getAccessTokenResult_params","type":"script","properties":{"body":"// let executionData = steps.checkExecutionStatus_getNewAccessToken.response.body.entry;\n\n// for(var i=0;i < executionData.stepExecutions.length; i++){\n//   if(executionData.stepExecutions[i]['stepName'] === \"Success\"){\n//     stepId = executionData.stepExecutions[i]['id'];\n//     break;\n//   }\n// }\n\nlet executionData = steps.executionStatus_getNewAccessToken.executionData.result;\nlet stepId = null;\n\nif(executionData.stepName === \"Success\"){\n  stepId = executionData.id;\n}\n\nlet payload = {\n  url: \"/formulas/instances/executions/steps/\"+stepId+\"/values\"\n};\n\ndone({\n    payload: payload\n});"}},{"id":226245,"onSuccess":["checkInstanceExist"],"onFailure":[],"name":"getInstances","type":"request","properties":{"method":"GET","api":"/formulas/${steps.formulaInformation.formulaId}/instances"}},{"id":215711,"onSuccess":["accessTokenFormulaDetails"],"onFailure":[],"name":"getNewAccessToken","type":"request","properties":{"method":"POST","api":"${steps.triggerRefreshToken.triggerParams.url}","body":"${steps.triggerRefreshToken.triggerParams.body}"}},{"id":215712,"onSuccess":["listPipelines"],"onFailure":["isAuthenticationFailed"],"name":"getPipelinesFromPipedrive","type":"httpRequest","properties":{"url":"${steps.getPipelinesFromPipedrive_params.payload.url}","retry":"true","method":"GET","retryAttempts":"5","headers":"${steps.getPipelinesFromPipedrive_params.payload.header}","retryDelay":"200"}},{"id":215713,"onSuccess":["getPipelinesFromPipedrive"],"onFailure":[],"name":"getPipelinesFromPipedrive_params","type":"script","properties":{"body":"let payload = {\n  url : \"https://api-proxy.pipedrive.com/pipelines\",\n  header: {\n    \"Authorization\": steps.getTpConfig.response.body.third_party_configuration.config_json.cloudElements.OAuth_Parameters.access_token || null\n  }\n}\n\n\ndone({\n  payload: payload\n});"}},{"id":215714,"onSuccess":[],"onFailure":[],"name":"getRefreshToken","type":"formula","properties":{"formulaId":"27953","args":"${steps.refreshTokenParams.input}"}},{"id":215715,"onSuccess":["resultPublished"],"onFailure":[],"name":"getResultAccessToken","type":"request","properties":{"method":"GET","api":"${steps.getAccessTokenResult_params.payload.url}"}},{"id":222873,"onSuccess":["addStagesToList"],"onFailure":["isAuthenticationFailed"],"name":"getStagesFromPipedrive","type":"httpRequest","properties":{"url":"${steps.getStagesFromPipedrive_params.payload.url}","method":"GET","query":"${steps.getStagesFromPipedrive_params.payload.query}","headers":"${steps.getStagesFromPipedrive_params.payload.header}"}},{"id":222872,"onSuccess":["getStagesFromPipedrive"],"onFailure":[],"name":"getStagesFromPipedrive_params","type":"script","properties":{"body":"let pipelineId = steps.loopOverPipelines.entry.value;\nlet stageList = [];\n\nlet payload = {\n  url : \"https://api-proxy.pipedrive.com/stages\",\n  header: {\n    \"Authorization\": steps.getTpConfig.response.body.third_party_configuration.config_json.cloudElements.OAuth_Parameters.access_token || null\n  },\n  query: {\n    \"pipeline_id\" : pipelineId\n  }\n}\n\nif(steps.addStagesToList !== undefined){\n  stageList = steps.addStagesToList.stages;\n}\n\nconsole.log(stageList.length);\n\ndone({\n  payload: payload,\n  stageList: stageList\n});"}},{"id":215716,"onSuccess":["updateElementInstanceParams"],"onFailure":[],"name":"getThirdPartyInstanceDetails","type":"request","properties":{"method":"GET","api":"/instances/${steps.getTpConfig.response.body.third_party_configuration.config_json.cloudElements.thirdParty.instance}"}},{"id":215717,"onSuccess":["isGetRefreshTokenInstanceExist"],"onFailure":[],"name":"getTpConfig","type":"httpRequest","properties":{"url":"${steps.InputParams.getTpConfigParams.url}","method":"GET","retry":"true","query":"${steps.InputParams.getTpConfigParams.query}","retryAttempts":"5","headers":"${steps.InputParams.getTpConfigParams.auth}","retryDelay":"200"}},{"id":215718,"onSuccess":["getTpConfig"],"onFailure":[],"name":"InputParams","type":"script","properties":{"body":"let apiKey = trigger.args.request.query['cb-api-key'] || null;\nlet siteName = trigger.args.request.query['cb-site-name'] || null;\nlet siteDomain = trigger.args.request.query['cb-domain'] || null;\nlet integration_name = \"pipedrive\";\nlet password = \"\";\n\nlet action = trigger.args.request.query['action'] || null;\nlet tokenUpdateExecutionId = trigger.args.request.query['tokenUpdateExecutionId'] || null;\n\nlet params = {\n  input:{\n    apiKey: apiKey,\n    siteName: siteName,\n    siteDomain: siteDomain,\n    integration_name: integration_name,\n    password: password,\n    action: action,\n    tokenUpdateExecutionId: tokenUpdateExecutionId\n  }\n};\n\n\nlet getTpConfigParams = {\n  url: \"https://\"+siteName+\".\"+siteDomain+\"/api/v2/third_party_configurations\",\n  updateUrl : \"https://\"+siteName+\".integrations.\"+siteDomain+\"/integrations/update_tp_integ_conf\",\n   headers: {\n    \"Content-Type\": \"application/json\",\n    \"cache-control\": \"no-cache\"\n  },\n  auth:{\n    Authorization: \"Basic \" + CE.b64(apiKey + \":\" + password)\n  },\n  query:{\n    integration_name: integration_name\n  }\n}\n\nlet updateTpConfigParams = {\n  url: \"https://\"+siteName+\".integrations.\"+siteDomain+\"/integrations/update_tp_integ_conf\",\n  headers: {\n    \"Content-Type\": \"application/json\",\n    \"cache-control\": \"no-cache\"\n  },\n  body: {\n     site_name: siteName,\n     api_key: apiKey,\n     integration_name: integration_name\n     //append config_json with this during request\n  }\n};\n\ndone({\n  params: params,\n  getTpConfigParams: getTpConfigParams,\n  updateTpConfigParams: updateTpConfigParams\n});"}},{"id":215719,"onSuccess":["getAccessTokenResult_params"],"onFailure":["isFailed_getNewAccessToken"],"name":"isAccessTokenFormulaDone","type":"filter","properties":{"body":"if(steps.executionStatus_getNewAccessToken.executionData.status === \"succeeded\"){\n  done(true);\n}\n\ndone(false);"}},{"id":215720,"onSuccess":["getPipelinesFromPipedrive_params"],"onFailure":["alreadyExecutionExist"],"name":"isAccessTokenValid","type":"filter","properties":{"body":"if(steps.InputParams.params.input.action === \"tokenUpdatePending\"){\n  done(false);\n}\n\nif(steps.InputParams.params.input.action === \"tokenUpdateSuccess\"){\n  done(true);\n}\n\n// let currentTime = Math.round((new Date().getTime())/1000);\n// let expiryTime = steps.getTpConfig.response.body.third_party_configuration.config_json.cloudElements.OAuth_Parameters.expiry_time || 0;\n\n// console.log(currentTime);\n// console.log(expiryTime);\n// console.log((expiryTime - currentTime) > (30 * 60));\n\n// if((expiryTime - currentTime) >= (50 * 60)){ //Difference greater than 30 minutes (Unix Timestamp)\n//   done(true);\n// }\n\n// done(false);\n\ndone(true);"}},{"id":223110,"onSuccess":["triggerRefreshToken"],"onFailure":["Error"],"name":"isAuthenticationFailed","type":"filter","properties":{"body":"if(steps.getPipelinesFromPipedrive !== undefined){\n  if(steps.getPipelinesFromPipedrive.response.code === 401){\n    done(true);\n  }\n}\n\nif(steps.getStagesFromPipedrive !== undefined){\n if(steps.getStagesFromPipedrive.response.code === 401){\n   done(true);\n }\n}\n\ndone(false);"}},{"id":215721,"onSuccess":["sendProcessCard"],"onFailure":["failedToGetAccessToken"],"name":"isFailed_getNewAccessToken","type":"filter","properties":{"body":"if(steps.executionStatus_getNewAccessToken.executionData.status === \"running\"){\n  done(true);\n}\n\nif(steps.executionStatus_getNewAccessToken.executionData.status === \"failed\"){\n  done(false);\n}"}},{"id":222868,"onSuccess":[],"onFailure":["loopOverPipelines"],"name":"isFirstTime","type":"filter","properties":{"body":"done(false);\n\nif(trigger.args.request.query['backStep']){\n  done(false);\n}\n\ndone(true);\n"}},{"id":226243,"onSuccess":["isAccessTokenValid"],"onFailure":["formulaInformation"],"name":"isGetRefreshTokenInstanceExist","type":"filter","properties":{"body":"if(steps.getTpConfig.response.body.third_party_configuration.config_json.cloudElements.formulas.formula_GetRefreshToken.instance === undefined){\n  done(false);\n}\n\ndone(true);"}},{"id":226247,"onSuccess":["updateTpConfigParams_2"],"onFailure":["createFormulaInstanceParams"],"name":"isInstanceExist","type":"filter","properties":{"body":"done(steps.checkInstanceExist.flag);"}},{"id":215722,"onSuccess":["loopOverPipelines"],"onFailure":["Error"],"name":"listPipelines","type":"script","properties":{"body":"if((steps.getPipelinesFromPipedrive.response.code !== 200) || (steps.getPipelinesFromPipedrive.response.body.data === undefined) || (steps.getPipelinesFromPipedrive.response.body.data.length === 0)){\n  done(false);\n}\n\n\nlet pipelineData = steps.getPipelinesFromPipedrive.response.body.data;\nlet temp;\nlet outputData = [];\n\nfor(var i=0; i < pipelineData.length; i++){\n  if(pipelineData[i].active === false){\n    continue;\n  }\n  \n  // temp = {\n  //   \"id\" : pipelineData[i].id,\n  //   \"name\" : pipelineData[i].name\n  // }\n  \n  temp = {\n    \"value\": pipelineData[i].id,\n    \"disp\": pipelineData[i].name\n   };\n   outputData.push(temp);\n  // pipelineDropdownContent.push(temp);\n  \n}\n\ntemp = {\n  \"value\":\"doNothing\",                       \n  \"disp\":\"Do Nothing\"       \n};\n\noutputData.push(temp);\n\n\ndone({\n  pipeline: outputData\n});\n"}},{"id":222875,"onSuccess":["Success_2"],"onFailure":[],"name":"listStages","type":"script","properties":{"body":"let stageList = [];\n\nif(steps.addStagesToList !== undefined){\n  stageList = steps.addStagesToList.stages;\n}\n\ndone({\n  stageList : stageList\n});"}},{"id":222869,"onSuccess":["getStagesFromPipedrive_params"],"onFailure":["listStages"],"name":"loopOverPipelines","type":"loop","properties":{"list":"${steps.listPipelines.pipeline.entry}"}},{"id":226250,"onSuccess":["updateTpConfigParams_2"],"onFailure":[],"name":"newInstanceCreatedInfo","type":"script","properties":{"body":"done({\n  id: steps.createFormulaInstance.response.body.id\n});"}},{"id":215723,"onSuccess":[],"onFailure":[],"name":"refreshTokenParams","type":"script","properties":{"body":"// let apiKey = \"test_FdeKa4XuFlZ6ZxikZjIrNLu1VNOkocOq\"\n// let siteName=\"ipaas-test\";\n// let siteDomain=\"chargebee-labs.com\";\n// let integration_name = \"pipedrive\";\n// let password = \"\";\n\nlet input = {\n  apiKey: steps.InputParams.params.input.apiKey,\n  siteName: steps.InputParams.params.input.siteName,\n  siteDomain: steps.InputParams.params.input.siteDomain,\n  integration_name: steps.InputParams.params.input.integration_name,\n  password: steps.InputParams.params.input.password\n}\n\ndone({\n  input: input\n});"}},{"id":215724,"onSuccess":["updateConfiguration"],"onFailure":["sendProcessCard"],"name":"resultPublished","type":"filter","properties":{"body":"if((steps.getResultAccessToken.response.code === 200) && ((steps.getResultAccessToken.response.body.length === 0) || (steps.getResultAccessToken.response.body === null))){\n  done(false);\n}\n\ndone(true);\n"}},{"id":215725,"onSuccess":[],"onFailure":[],"name":"sendProcessCard","type":"script","properties":{"body":"let instanceId = info.formulaInstanceId;\n\nlet cloudElementsUrl = steps.EnvProps.cloudElementsUrl;\n\n// steps.getTpConfig.response.body.third_party_configuration.config_json.cloudElements.formulas.formula_SyncRulesDealsSetup.instance\n\nlet card = {\n   \"cards\":[\n      {\n         \"card\": {\n            \"type\" : \"PROCESSING\",\n            \"processingText\": \" Access Token Expired. Reauthenticating with Pipedrive...\",\n            \"request\" : {\n               \"type\":\"DOC_READY_GET_CARD\",\n               \"apiEndPoint\":{\n                  \"apiUrl\": cloudElementsUrl+\"/pipedrive/syncRulesDealsSetup\",\n                        \"type\": \"GET\",\n                        \"headers\": {\n                            \"Elements-Formula-Instance-Id\": instanceId\n                        },\n                        \"input\":{\n                            \"integrationName\": steps.InputParams.params.input.integrationName,\n                            \"siteDomain\": steps.InputParams.params.input.siteDomain,\n                            \"action\": \"tokenUpdatePending\",\n                            \"tokenUpdateExecutionId\" : steps.accessTokenFormulaDetails.formulaExecutionDetails.excecutionId || null\n                        }\n               }\n            }\n         },\n         \"id\" : \"testdynamic2\",\n      } \n   ],\n   \"proceed\":{\n        \"id\":\"proceed\",\n        \"display\" : \"Proceed\",\n        \"icon\" : \"ARROW\",\n        \"buttonLook\":\"FILLED\",\n        \"type\" : \"DIRECT_LINK\",\n        \"request\":{\n            \"type\":\"ON_CLICK_SEND_INPUT\",\n            \"apiEndPoint\":{\n                \"apiUrl\": cloudElementsUrl+\"/pipedrive/syncRulesDealsResponse\",\n                \"type\":\"GET\",\n                \"headers\":{\n                    \"Elements-Formula-Instance-Id\": steps.getTpConfig.response.body.third_party_configuration.config_json.cloudElements.formulas.formula_SyncRulesDealsConfig.instance || null\n                },\n                \"input\":{\n                    \"id\":\"chargebee\"\n                }\n            }\n        }\n    }\n};\n\ndone({\n statusCode: 200,\n result: card\n});\n\n"}},{"id":226256,"onSuccess":[],"onFailure":[],"name":"sendProcessCard_instanceCreation","type":"script","properties":{"body":"let instanceId = info.formulaInstanceId;\n\nlet cloudElementsUrl = steps.EnvProps.cloudElementsUrl;\n\n// steps.getTpConfig.response.body.third_party_configuration.config_json.cloudElements.formulas.formula_SyncRulesDealsSetup.instance\n\nlet card = {\n   \"cards\":[\n      {\n         \"card\": {\n            \"type\" : \"PROCESSING\",\n            \"processingText\": \" Loading...\",\n            \"request\" : {\n               \"type\":\"DOC_READY_GET_CARD\",\n               \"apiEndPoint\":{\n                  \"apiUrl\": cloudElementsUrl+\"/pipedrive/syncRulesDealsSetup\",\n                        \"type\": \"GET\",\n                        \"headers\": {\n                            \"Elements-Formula-Instance-Id\": instanceId\n                        },\n                        \"input\":{\n                            \"integrationName\": steps.InputParams.params.input.integrationName,\n                            \"siteDomain\": steps.InputParams.params.input.siteDomain\n                        }\n               }\n            }\n         },\n         \"id\" : \"testdynamic2\",\n      } \n   ],\n   \"proceed\":{\n        \"id\":\"proceed\",\n        \"display\" : \"Proceed\",\n        \"icon\" : \"ARROW\",\n        \"buttonLook\":\"FILLED\",\n        \"type\" : \"DIRECT_LINK\",\n        \"request\":{\n            \"type\":\"ON_CLICK_SEND_INPUT\",\n            \"apiEndPoint\":{\n                \"apiUrl\": cloudElementsUrl+\"/pipedrive/syncRulesDealsResponse\",\n                \"type\":\"GET\",\n                \"headers\":{\n                    \"Elements-Formula-Instance-Id\": steps.getTpConfig.response.body.third_party_configuration.config_json.cloudElements.formulas.formula_SyncRulesDealsConfig.instance || null\n                },\n                \"input\":{\n                    \"id\":\"chargebee\"\n                }\n            }\n        }\n    }\n};\n\ndone({\n statusCode: 200,\n result: card\n});"}},{"id":215726,"onSuccess":[],"onFailure":[],"name":"sendProcessCard_success","type":"script","properties":{"body":"let instanceId = info.formulaInstanceId;\n\n\nlet cloudElementsUrl = steps.EnvProps.cloudElementsUrl;\n\n\nlet card = {\n   \"cards\":[\n      {\n         \"card\": {\n            \"type\" : \"PROCESSING\",\n            \"processingText\": \" Access Token Expired. Reauthenticating with Pipedrive...\",\n            \"request\" : {\n               \"type\":\"DOC_READY_GET_CARD\",\n               \"apiEndPoint\":{\n                  \"apiUrl\": cloudElementsUrl+\"/pipedrive/syncRulesDealsSetup\",\n                        \"type\": \"GET\",\n                        \"headers\": {\n                            \"Elements-Formula-Instance-Id\": instanceId\n                        },\n                        \"input\":{\n                            \"integrationName\": steps.InputParams.params.input.integrationName,\n                            \"siteDomain\": steps.InputParams.params.input.siteDomain,\n                            \"action\": \"tokenUpdateSuccess\"\n                        }\n               }\n            }\n         },\n         \"id\" : \"testdynamic2\",\n      } \n   ],\n   \"proceed\":{\n        \"id\":\"proceed\",\n        \"display\" : \"Proceed\",\n        \"icon\" : \"ARROW\",\n        \"buttonLook\":\"FILLED\",\n        \"type\" : \"DIRECT_LINK\",\n        \"request\":{\n            \"type\":\"ON_CLICK_SEND_INPUT\",\n            \"apiEndPoint\":{\n                \"apiUrl\":cloudElementsUrl+\"/pipedrive/syncRulesDealsResponse\",\n                \"type\":\"GET\",\n                \"headers\":{\n                    \"Elements-Formula-Instance-Id\": steps.getTpConfig.response.body.third_party_configuration.config_json.cloudElements.formulas.formula_SyncRulesDealsConfig.instance || null\n                },\n                \"input\":{\n                    \"id\":\"chargebee\"\n                }\n            }\n        }\n    }\n};\n\ndone({\n statusCode: 200,\n result: card\n});\n\n"}},{"id":215727,"onSuccess":[],"onFailure":[],"name":"Success","type":"script","properties":{"body":"let cloudElementsUrl = steps.EnvProps.cloudElementsUrl;\nlet getStagesInstanceId = steps.getTpConfig.response.body.third_party_configuration.config_json.cloudElements.formulas.formula_GetPipelineStages.instance;\n\nlet pipelineList = steps.listPipelines.pipeline;\n\nlet card = {\n  \"cards\" : [\n      {\n        \"card\": {\n        \"type\" : \"EMPTY_BACKGROUND\",\n        \"heading\":\"Deal Settings For Subscriptions\",\n          \"contents\":[\n            \"How would you like to handle deals in pipedrive when changes are made in subscriptions in Chargebee. <a href=\\\"\\\" target=\\\"blank\\\">Learn more</a>\"\n            ]\n        },\n        \"isCardDone\": \"true\"\n      },\n      {\n        \"card\": {\n            \"heading\": \"Choose how you'd like to handle deals in Pipedrive when\",\n            \"type\" : \"DYNAMIC_INPUT\",\n            \"params\": [\n              {  \n                \"dispName\":\"... subscription is <b>created</b>\",\n                \"req\":\"false\",\n                \"id\":\"subCreated\",\n                \"type\":\"DROPDOWN\",\n                \"isDynamic\":\"true\",\n                \"request\":{\n                  \"type\":\"ON_CHANGE_FETCH_INPUT\",\n                  \"apiEndPoint\":{\n                    \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                    \"type\":\"GET\",\n                    \"headers\":{\n                      \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                      \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                    },\n                    \"input\":{\n                      \"card\":\"subscription\"\n                    }\n                  }\n                },\n               \"allowedValues\":{\n                    \"option1\":\"Create a deal\",\n                    \"option2\":\"Update a deal\",\n                    \"option3\":\"Do Nothing\"\n                 },\n                  \"defaultVal\":\"option3\"\n              },\n              {  \n                \"dispName\":\"... subscription items are <b>updated</b>\",\n                \"req\":\"false\",\n                \"type\":\"DROPDOWN\",\n                \"id\":\"subUpdated\",\n                \"isDynamic\":\"true\",\n                \"request\":{\n                  \"type\":\"ON_CHANGE_FETCH_INPUT\",\n                  \"apiEndPoint\":{\n                    \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                    \"type\":\"GET\",\n                    \"headers\":{\n                      \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                      \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                    },\n                    \"input\":{\n                      \"card\":\"subscription\"\n                    }\n                  }\n                },\n                \"allowedValues\":{\n                    \"option1\":\"Create a deal\",\n                    \"option2\":\"Update a deal\",\n                    \"option3\":\"Do Nothing\"\n                },\n                  \"defaultVal\":\"option3\"\n              },\n              {  \n                \"dispName\":\"... subscription is <b>deleted</b>\",\n                \"req\":\"false\",\n                \"type\":\"DROPDOWN\",\n                \"id\":\"subDeleted\",\n                \"isDynamic\":\"true\",\n                \"request\":{\n                  \"type\":\"ON_CHANGE_FETCH_INPUT\",\n                  \"apiEndPoint\":{\n                    \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                    \"type\":\"GET\",\n                    \"headers\":{\n                      \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                      \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                    },\n                    \"input\":{\n                      \"card\":\"subscription\"\n                    }\n                  }\n                },\n                \"allowedValues\":{\n                    \"option1\":\"Create a deal\",\n                    \"option2\":\"Update a deal\",\n                    \"option3\":\"Do Nothing\"\n                },\n                  \"defaultVal\":\"option3\"\n              },\n              {  \n                \"dispName\":\"... subscription is <b>paused</b>\",\n                \"req\":\"false\",\n                \"type\":\"DROPDOWN\",\n                \"id\":\"subPaused\",\n                \"isDynamic\":\"true\",\n                \"request\":{\n                  \"type\":\"ON_CHANGE_FETCH_INPUT\",\n                  \"apiEndPoint\":{\n                    \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                    \"type\":\"GET\",\n                    \"headers\":{\n                      \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                      \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                    },\n                    \"input\":{\n                      \"card\":\"subscription\"\n                    }\n                  }\n                },\n                \"allowedValues\":{\n                    \"option1\":\"Create a deal\",\n                    \"option2\":\"Update a deal\",\n                    \"option3\":\"Do Nothing\"\n                },\n                  \"defaultVal\":\"option3\"\n              },\n              {  \n                \"dispName\":\"... subscription is <b>resumed</b>\",\n                \"req\":\"false\",\n                \"type\":\"DROPDOWN\",\n                \"id\":\"subResumed\",\n                \"isDynamic\":\"true\",\n                \"request\":{\n                  \"type\":\"ON_CHANGE_FETCH_INPUT\",\n                  \"apiEndPoint\":{\n                    \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                    \"type\":\"GET\",\n                    \"headers\":{\n                      \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                      \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                    },\n                    \"input\":{\n                      \"card\":\"subscription\"\n                    }\n                  }\n                },\n                \"allowedValues\":{\n                    \"option1\":\"Create a deal\",\n                    \"option2\":\"Update a deal\",\n                    \"option3\":\"Do Nothing\"\n                },\n                  \"defaultVal\":\"option3\"\n              },\n              {  \n                \"dispName\":\"... subscription is <b>cancelled</b>\",\n                \"req\":\"false\",\n                \"type\":\"DROPDOWN\",\n                \"id\":\"subCancelled\",\n                \"isDynamic\":\"true\",\n                \"request\":{\n                  \"type\":\"ON_CHANGE_FETCH_INPUT\",\n                  \"apiEndPoint\":{\n                    \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                    \"type\":\"GET\",\n                    \"headers\":{\n                      \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                      \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                    },\n                    \"input\":{\n                      \"card\":\"subscription\"\n                    }\n                  }\n                },\n                \"allowedValues\":{\n                    \"option1\":\"Create a deal\",\n                    \"option2\":\"Update a deal\",\n                    \"option3\":\"Do Nothing\"\n                },\n                  \"defaultVal\":\"option3\"\n              },\n              {  \n                \"dispName\":\"... subscription is <b>reactivated</b>\",\n                \"req\":\"false\",\n                \"type\":\"DROPDOWN\",\n                \"id\":\"subReactivated\",\n                \"isDynamic\":\"true\",\n                \"isSeperator\":true,\n                \"request\":{\n                  \"type\":\"ON_CHANGE_FETCH_INPUT\",\n                  \"apiEndPoint\":{\n                    \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                    \"type\":\"GET\",\n                    \"headers\":{\n                      \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                      \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                    },\n                    \"input\":{\n                      \"card\":\"subscription\"\n                    }\n                  }\n                },\n                \"allowedValues\":{\n                    \"option1\":\"Create a deal\",\n                    \"option2\":\"Update a deal\",\n                    \"option3\":\"Do Nothing\"\n                },\n                  \"defaultVal\":\"option3\"\n              },\n              {       \n              \"dispName\":\"Allow Chargebee to add notes to deals\",\n                \"desc\":\"Enable if you want Chargebee to add notes to deals when changes are made to deal stage or deal value.<a href=\\\"\\\" target=\\\"blank\\\">Learn more</a>\",\n                \"req\":\"false\",\n                \"type\":\"TOGGLE\",\n                \"id\":\"addNotesSubscription\",\n                \"subCaption\":\"Example: \\\"Deal worth USD 99 created due to subscription (#12dfgh) creation in Chargebee\\\"\"\n              }\n            ]\n        },\n          \"id\" : \"testdynamic\",\n          \"isCardDone\": \"true\"\n      },\n      {\n        \"card\": {\n        \"type\" : \"EMPTY_BACKGROUND\",\n        \"heading\":\"Deal Settings For Customer One-Time Invoices\",\n          \"contents\":[\n            \"Configure how you'd like to handle when one-time invoices are created in Chargebee.\"\n            ]\n        },\n        \"isCardDone\": \"true\"\n      },\n      {\n        \"card\": {\n            \"heading\": \"Choose how you'd like to handle deals in Pipedrive when\",\n            \"type\" : \"DYNAMIC_INPUT\",\n            \"params\": [\n              {  \n                \"dispName\":\"... invoice is <b>created</b>\",\n                \"req\":\"false\",\n                \"type\":\"DROPDOWN\",\n                \"id\":\"invCreated\",\n                \"isDynamic\":\"true\",\n                \"request\":{\n                  \"type\":\"ON_CHANGE_FETCH_INPUT\",\n                  \"apiEndPoint\":{\n                    \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                    \"type\":\"GET\",\n                    \"headers\":{\n                      \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                      \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                    },\n                    \"input\":{\n                      \"card\":\"invoice\"\n                    }\n                  }\n                },\n                \"allowedValues\":{\n                    \"option1\":\"Create a deal\",\n                    \"option2\":\"Update a deal\",\n                    \"option3\":\"Do Nothing\"\n                },\n                  \"defaultVal\":\"option3\"\n              },\n              {  \n                \"dispName\":\"... invoice is <b>deleted</b>\",\n                \"req\":\"false\",\n                \"type\":\"DROPDOWN\",\n                \"id\":\"invDeleted\",\n                \"isDynamic\":\"true\",\n                \"request\":{\n                  \"type\":\"ON_CHANGE_FETCH_INPUT\",\n                  \"apiEndPoint\":{\n                    \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                    \"type\":\"GET\",\n                    \"headers\":{\n                      \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                      \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                    },\n                    \"input\":{\n                      \"card\":\"invoice\"\n                    }\n                  }\n                },\n                \"allowedValues\":{\n                    \"option1\":\"Create a deal\",\n                    \"option2\":\"Update a deal\",\n                    \"option3\":\"Do Nothing\"\n                },\n                  \"defaultVal\":\"option3\"\n              },\n              {  \n                \"dispName\":\"... invoice is <b>paid</b>\",\n                \"req\":\"false\",\n                \"type\":\"DROPDOWN\",\n                \"id\":\"invPaid\",\n                \"isDynamic\":\"true\",\n                \"request\":{\n                  \"type\":\"ON_CHANGE_FETCH_INPUT\",\n                  \"apiEndPoint\":{\n                    \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                    \"type\":\"GET\",\n                    \"headers\":{\n                      \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                      \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                    },\n                    \"input\":{\n                      \"card\":\"invoice\"\n                    }\n                  }\n                },\n                \"allowedValues\":{\n                    \"option1\":\"Create a deal\",\n                    \"option2\":\"Update a deal\",\n                    \"option3\":\"Do Nothing\"\n                },\n                  \"defaultVal\":\"option3\"\n              },\n              {  \n                \"dispName\":\"... invoice is <b>voided</b>\",\n                \"req\":\"false\",\n                \"type\":\"DROPDOWN\",\n                \"id\":\"invVoided\",\n                \"isDynamic\":\"true\",\n                \"request\":{\n                  \"type\":\"ON_CHANGE_FETCH_INPUT\",\n                  \"apiEndPoint\":{\n                    \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                    \"type\":\"GET\",\n                    \"headers\":{\n                      \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                      \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                    },\n                    \"input\":{\n                      \"card\":\"invoice\"\n                    }\n                  }\n                },\n                \"allowedValues\":{\n                    \"option1\":\"Create a deal\",\n                    \"option2\":\"Update a deal\",\n                    \"option3\":\"Do Nothing\"\n                },\n                  \"defaultVal\":\"option3\"\n              },\n              {       \n              \"dispName\":\"Update deal value with invoice amount\",\n                \"desc\":\"Disable if you don't want Chargebee to deal value in Pipedrive with invoice amount.\",\n                \"req\":\"false\",\n                \"type\":\"TOGGLE\",\n                 \"isSeperator\":true,\n                \"id\":\"updateDealValueWithInvoice\"\n              },\n              {       \n              \"dispName\":\"Allow Chargebee to add notes to deals\",\n                \"desc\":\"Enable if you want Chargebee to add notes to deals when changes are made to deal stage or deal value.\",\n                \"req\":\"false\",\n                \"type\":\"TOGGLE\",\n                \"id\":\"addNotesInvoice\",\n                \"subCaption\":\"Example: \\\"Deal worth USD 99 created due to subscription (#12dfgh) creation in Chargebee\\\"\",\n              }\n            ]\n        },\n          \"id\" : \"testdynamic2\",\n          \"isCardDone\": \"true\"\n      }\n  ],\n  \"proceed\":{\n        \"id\":\"proceed\",\n        \"display\" : \"Proceed\",\n        \"icon\" : \"ARROW\",\n        \"buttonLook\":\"FILLED\",\n        \"type\" : \"DIRECT_LINK\",\n        \"request\":{\n            \"type\":\"ON_CLICK_SEND_INPUT\",\n            \"apiEndPoint\":{\n                \"apiUrl\":cloudElementsUrl+\"/pipedrive/syncRulesDealsResponse\",\n                \"type\":\"GET\",\n                \"headers\":{\n                    \"Elements-Formula-Instance-Id\": steps.getTpConfig.response.body.third_party_configuration.config_json.cloudElements.formulas.formula_SyncRulesDealsConfig.instance || null\n                },\n                \"input\":{\n                    \"id\":\"chargebee\"\n                }\n            }\n        }\n    }\n};\n\ndone(card);"}},{"id":222876,"onSuccess":[],"onFailure":[],"name":"Success_2","type":"script","properties":{"body":"let cloudElementsUrl = steps.EnvProps.cloudElementsUrl;\nlet getStagesInstanceId = steps.getTpConfig.response.body.third_party_configuration.config_json.cloudElements.formulas.formula_GetPipelineStages.instance;\n\nlet pipelineList = steps.listPipelines.pipeline;\nlet stagesList = steps.listStages.stageList;\nlet tpConfig = steps.getTpConfig.response.body.third_party_configuration.config_json.cloudElements;\n\nlet card = {\n  \"cards\" : [\n      {\n        \"card\": {\n        \"type\" : \"EMPTY_BACKGROUND\",\n        \"heading\":\"Deal Settings For Subscriptions\",\n          \"contents\":[\n            \"How would you like to handle deals in pipedrive when changes are made to subscriptions in Chargebee. <a href=\\\"https://www.chargebee.com\\\" target=\\\"blank\\\">Learn More</a>\"\n            ]\n        },\n        \"isCardDone\": \"true\"\n      },\n      {\n        \"card\": {\n            \"heading\": \"Choose how you'd like to handle deals in Pipedrive when\",\n            \"type\" : \"DYNAMIC_INPUT\",\n            \"params\": [\n              {  \n                \"dispName\":\"... subscription is <b>created</b>\",\n                \"req\":\"false\",\n                \"id\":\"subCreated\",\n                \"type\":\"DROPDOWN_DYNAMIC\",\n                \"isDynamic\":\"true\",\n                \"request\":{\n                  \"type\":\"ON_CHANGE_FETCH_INPUT\",\n                  \"apiEndPoint\":{\n                    \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                    \"type\":\"GET\",\n                    \"headers\":{\n                      \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                      \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                    },\n                    \"input\":{\n                      \"card\":\"subscription\"\n                    }\n                  }\n                },\n               \"dropDownItemsList\":[\n                  {\n                    \"disp\": \"Create a deal\",\n                    \"value\": \"option1\"\n                  },\n                  {\n                    \"disp\": \"Update existing deal\",\n                    \"value\": \"option2\",\n                    \"helptext\": \"Last Created Open deal will be updated in Pipedrive. <a href='' target='blank'>Learn More</a>\"\n                  },\n                  {\n                    \"disp\": \"Do Nothing\",\n                    \"value\": \"option3\"\n                  }\n                ],\n                  \"defaultVal\":\"option3\"\n              },\n              {  \n                \"dispName\":\"... subscription items are <b>updated</b>\",\n                \"req\":\"false\",\n                \"type\":\"DROPDOWN_DYNAMIC\",\n                \"id\":\"subUpdated\",\n                \"isDynamic\":\"true\",\n                \"request\":{\n                  \"type\":\"ON_CHANGE_FETCH_INPUT\",\n                  \"apiEndPoint\":{\n                    \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                    \"type\":\"GET\",\n                    \"headers\":{\n                      \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                      \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                    },\n                    \"input\":{\n                      \"card\":\"subscription\"\n                    }\n                  }\n                },\n                \"dropDownItemsList\":[\n                  {\n                    \"disp\": \"Create a deal\",\n                    \"value\": \"option1\"\n                  },\n                  {\n                    \"disp\": \"Update existing deal\",\n                    \"value\": \"option2\",\n                    \"helptext\": \"Last Created Open deal will be updated in Pipedrive. <a href='' target='blank'>Learn More</a>\"\n                  },\n                  {\n                    \"disp\": \"Do Nothing\",\n                    \"value\": \"option3\"\n                  }\n                ],\n                  \"defaultVal\":\"option3\"\n              },\n              {  \n                \"dispName\":\"... subscription is <b>deleted</b>\",\n                \"req\":\"false\",\n                \"type\":\"DROPDOWN_DYNAMIC\",\n                \"id\":\"subDeleted\",\n                \"isDynamic\":\"true\",\n                \"request\":{\n                  \"type\":\"ON_CHANGE_FETCH_INPUT\",\n                  \"apiEndPoint\":{\n                    \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                    \"type\":\"GET\",\n                    \"headers\":{\n                      \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                      \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                    },\n                    \"input\":{\n                      \"card\":\"subscription\"\n                    }\n                  }\n                },\n                \"dropDownItemsList\":[\n                  {\n                    \"disp\": \"Update existing deal\",\n                    \"value\": \"option2\",\n                    \"helptext\": \"Last Created Open deal will be updated in Pipedrive. <a href='' target='blank'>Learn More</a>\"\n                  },\n                  {\n                    \"disp\": \"Do Nothing\",\n                    \"value\": \"option3\"\n                  }\n                ],\n                  \"defaultVal\":\"option3\"\n              },\n              {  \n                \"dispName\":\"... subscription is <b>paused</b>\",\n                \"req\":\"false\",\n                \"type\":\"DROPDOWN_DYNAMIC\",\n                \"id\":\"subPaused\",\n                \"isDynamic\":\"true\",\n                \"request\":{\n                  \"type\":\"ON_CHANGE_FETCH_INPUT\",\n                  \"apiEndPoint\":{\n                    \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                    \"type\":\"GET\",\n                    \"headers\":{\n                      \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                      \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                    },\n                    \"input\":{\n                      \"card\":\"subscription\"\n                    }\n                  }\n                },\n                \"dropDownItemsList\":[\n                  {\n                    \"disp\": \"Update existing deal\",\n                    \"value\": \"option2\",\n                    \"helptext\": \"Last Created Open deal will be updated in Pipedrive. <a href='' target='blank'>Learn More</a>\"\n                  },\n                  {\n                    \"disp\": \"Do Nothing\",\n                    \"value\": \"option3\"\n                  }\n                ],\n                  \"defaultVal\":\"option3\"\n              },\n              {  \n                \"dispName\":\"... subscription is <b>resumed</b>\",\n                \"req\":\"false\",\n                \"type\":\"DROPDOWN_DYNAMIC\",\n                \"id\":\"subResumed\",\n                \"isDynamic\":\"true\",\n                \"request\":{\n                  \"type\":\"ON_CHANGE_FETCH_INPUT\",\n                  \"apiEndPoint\":{\n                    \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                    \"type\":\"GET\",\n                    \"headers\":{\n                      \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                      \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                    },\n                    \"input\":{\n                      \"card\":\"subscription\"\n                    }\n                  }\n                },\n                \"dropDownItemsList\":[\n                  {\n                    \"disp\": \"Update existing deal\",\n                    \"value\": \"option2\",\n                    \"helptext\": \"Last Created Open deal will be updated in Pipedrive. <a href='' target='blank'>Learn More</a>\"\n                  },\n                  {\n                    \"disp\": \"Do Nothing\",\n                    \"value\": \"option3\"\n                  }\n                ],\n                  \"defaultVal\":\"option3\"\n              },\n              {  \n                \"dispName\":\"... subscription is <b>cancelled</b>\",\n                \"req\":\"false\",\n                \"type\":\"DROPDOWN_DYNAMIC\",\n                \"id\":\"subCancelled\",\n                \"isDynamic\":\"true\",\n                \"request\":{\n                  \"type\":\"ON_CHANGE_FETCH_INPUT\",\n                  \"apiEndPoint\":{\n                    \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                    \"type\":\"GET\",\n                    \"headers\":{\n                      \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                      \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                    },\n                    \"input\":{\n                      \"card\":\"subscription\"\n                    }\n                  }\n                },\n                \"dropDownItemsList\":[\n                  {\n                    \"disp\": \"Update existing deal\",\n                    \"value\": \"option2\",\n                    \"helptext\": \"Last Created Open deal will be updated in Pipedrive. <a href='' target='blank'>Learn More</a>\"\n                  },\n                  {\n                    \"disp\": \"Do Nothing\",\n                    \"value\": \"option3\"\n                  }\n                ],\n                  \"defaultVal\":\"option3\"\n              },\n              {  \n                \"dispName\":\"... subscription is <b>reactivated</b>\",\n                \"req\":\"false\",\n                \"type\":\"DROPDOWN_DYNAMIC\",\n                \"id\":\"subReactivated\",\n                \"isDynamic\":\"true\",\n                \"request\":{\n                  \"type\":\"ON_CHANGE_FETCH_INPUT\",\n                  \"apiEndPoint\":{\n                    \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                    \"type\":\"GET\",\n                    \"headers\":{\n                      \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                      \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                    },\n                    \"input\":{\n                      \"card\":\"subscription\"\n                    }\n                  }\n                },\n                \"dropDownItemsList\":[\n                  {\n                    \"disp\": \"Create a deal\",\n                    \"value\": \"option1\"\n                  },\n                  {\n                    \"disp\": \"Update existing deal\",\n                    \"value\": \"option2\",\n                    \"helptext\": \"Last Created Open deal will be updated in Pipedrive. <a href='' target='blank'>Learn More</a>\"\n                  },\n                  {\n                    \"disp\": \"Do Nothing\",\n                    \"value\": \"option3\"\n                  }\n                ],\n                  \"defaultVal\":\"option3\"\n              }\n            ]\n        },\n          \"id\" : \"testdynamic\",\n          \"isCardDone\": \"true\"\n      },\n      {\n        \"card\": {\n        \"type\" : \"EMPTY_BACKGROUND\",\n        \"heading\":\"Deal Settings For Customer One-Time Invoices\",\n          \"contents\":[\n            \"Configure how you'd like to handle when one-time invoices are created in Chargebee. <a href=\\\"https://www.chargebee.com\\\" target=\\\"blank\\\"  >Learn More</a>\"\n            ]\n        },\n        \"isCardDone\": \"true\"\n      },\n      {\n        \"card\": {\n            \"heading\": \"Choose how you'd like to handle deals in Pipedrive when\",\n            \"type\" : \"DYNAMIC_INPUT\",\n            \"params\": [\n              {  \n                \"dispName\":\"... invoice is <b>created</b>\",\n                \"req\":\"false\",\n                \"type\":\"DROPDOWN_DYNAMIC\",\n                \"id\":\"invCreated\",\n                \"isDynamic\":\"true\",\n                \"request\":{\n                  \"type\":\"ON_CHANGE_FETCH_INPUT\",\n                  \"apiEndPoint\":{\n                    \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                    \"type\":\"GET\",\n                    \"headers\":{\n                      \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                      \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                    },\n                    \"input\":{\n                      \"card\":\"invoice\"\n                    }\n                  }\n                },\n                \"dropDownItemsList\":[\n                  {\n                    \"disp\": \"Create a deal\",\n                    \"value\": \"option1\"\n                  },\n                  {\n                    \"disp\": \"Update existing deal\",\n                    \"value\": \"option2\",\n                    \"helptext\": \"Last Created Open deal will be updated in Pipedrive. <a href='' target='blank'>Learn More</a>\"\n                  },\n                  {\n                    \"disp\": \"Do Nothing\",\n                    \"value\": \"option3\"\n                  }\n                ],\n                  \"defaultVal\":\"option3\"\n              },\n              {  \n                \"dispName\":\"... invoice is <b>deleted</b>\",\n                \"req\":\"false\",\n                \"type\":\"DROPDOWN_DYNAMIC\",\n                \"id\":\"invDeleted\",\n                \"isDynamic\":\"true\",\n                \"request\":{\n                  \"type\":\"ON_CHANGE_FETCH_INPUT\",\n                  \"apiEndPoint\":{\n                    \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                    \"type\":\"GET\",\n                    \"headers\":{\n                      \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                      \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                    },\n                    \"input\":{\n                      \"card\":\"invoice\"\n                    }\n                  }\n                },\n                \"dropDownItemsList\":[\n                  {\n                    \"disp\": \"Update existing deal\",\n                    \"value\": \"option2\",\n                    \"helptext\": \"Last Created Open deal will be updated in Pipedrive. <a href='' target='blank'>Learn More</a>\"\n                  },\n                  {\n                    \"disp\": \"Do Nothing\",\n                    \"value\": \"option3\"\n                  }\n                ],\n                  \"defaultVal\":\"option3\"\n              },\n              {  \n                \"dispName\":\"... invoice is <b>paid</b>\",\n                \"req\":\"false\",\n                \"type\":\"DROPDOWN_DYNAMIC\",\n                \"id\":\"invPaid\",\n                \"isDynamic\":\"true\",\n                \"request\":{\n                  \"type\":\"ON_CHANGE_FETCH_INPUT\",\n                  \"apiEndPoint\":{\n                    \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                    \"type\":\"GET\",\n                    \"headers\":{\n                      \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                      \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                    },\n                    \"input\":{\n                      \"card\":\"invoice\"\n                    }\n                  }\n                },\n                \"dropDownItemsList\":[\n                  {\n                    \"disp\": \"Update existing deal\",\n                    \"value\": \"option2\",\n                    \"helptext\": \"Last Created Open deal will be updated in Pipedrive. <a href='' target='blank'>Learn More</a>\"\n                  },\n                  {\n                    \"disp\": \"Do Nothing\",\n                    \"value\": \"option3\"\n                  }\n                ],\n                  \"defaultVal\":\"option3\"\n              },\n              {  \n                \"dispName\":\"... invoice is <b>voided</b>\",\n                \"req\":\"false\",\n                \"type\":\"DROPDOWN_DYNAMIC\",\n                \"id\":\"invVoided\",\n                \"isDynamic\":\"true\",\n                \"request\":{\n                  \"type\":\"ON_CHANGE_FETCH_INPUT\",\n                  \"apiEndPoint\":{\n                    \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                    \"type\":\"GET\",\n                    \"headers\":{\n                      \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                      \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                    },\n                    \"input\":{\n                      \"card\":\"invoice\"\n                    }\n                  }\n                },\n                \"dropDownItemsList\":[\n                  {\n                    \"disp\": \"Update existing deal\",\n                    \"value\": \"option2\",\n                    \"helptext\": \"Last Created Open deal will be updated in Pipedrive. <a href='' target='blank'>Learn More</a>\"\n                  },\n                  {\n                    \"disp\": \"Do Nothing\",\n                    \"value\": \"option3\"\n                  }\n                ],\n                  \"defaultVal\":\"option3\"\n              }\n            ]\n        },\n          \"id\" : \"testdynamic2\",\n          \"isCardDone\": \"true\"\n      }\n  ],\n  \"proceed\":{\n        \"id\":\"proceed\",\n        \"display\" : \"Proceed\",\n        \"icon\" : \"ARROW\",\n        \"buttonLook\":\"FILLED\",\n        \"type\" : \"DIRECT_LINK\",\n        \"request\":{\n            \"type\":\"ON_CLICK_SEND_INPUT\",\n            \"apiEndPoint\":{\n                \"apiUrl\":cloudElementsUrl+\"/pipedrive/syncRulesDealsResponse\",\n                \"type\":\"GET\",\n                \"headers\":{\n                    \"Elements-Formula-Instance-Id\": steps.getTpConfig.response.body.third_party_configuration.config_json.cloudElements.formulas.formula_SyncRulesDealsConfig.instance || null\n                },\n                \"input\":{\n                    \"id\":\"chargebee\"\n                }\n            }\n        }\n    }\n};\n\nif(tpConfig.syncRulesDeals !== undefined){\n  let pipeline;\n  let stage;\n  let newParams = [\n    {  \n      \"dispName\":\"... subscription is <b>created</b>\",\n      \"req\":\"false\",\n      \"id\":\"subCreated\",\n      \"type\":\"DROPDOWN_DYNAMIC\",\n      \"isDynamic\":\"true\",\n      \"request\":{\n        \"type\":\"ON_CHANGE_FETCH_INPUT\",\n        \"apiEndPoint\":{\n          \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n          \"type\":\"GET\",\n          \"headers\":{\n            \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n            \"Elements-Formula-Instance-Id\": getStagesInstanceId\n          },\n          \"input\":{\n            \"card\":\"subscription\"\n          }\n        }\n      },\n     \"dropDownItemsList\":[\n        {\n          \"disp\": \"Create a deal\",\n          \"value\": \"option1\"\n        },\n        {\n          \"disp\": \"Update existing deal\",\n          \"value\": \"option2\",\n          \"helptext\": \"Last Created Open deal will be updated in Pipedrive. <a href='' target='blank'>Learn More</a>\"\n        },\n        {\n          \"disp\": \"Do Nothing\",\n          \"value\": \"option3\"\n        }\n      ],\n        \"defaultVal\": tpConfig.syncRulesDeals.subCreated || \"option3\"\n    },\n    {  \n      \"dispName\":\"... subscription items are <b>updated</b>\",\n      \"req\":\"false\",\n      \"type\":\"DROPDOWN_DYNAMIC\",\n      \"id\":\"subUpdated\",\n      \"isDynamic\":\"true\",\n      \"request\":{\n        \"type\":\"ON_CHANGE_FETCH_INPUT\",\n        \"apiEndPoint\":{\n          \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n          \"type\":\"GET\",\n          \"headers\":{\n            \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n            \"Elements-Formula-Instance-Id\": getStagesInstanceId\n          },\n          \"input\":{\n            \"card\":\"subscription\"\n          }\n        }\n      },\n      \"dropDownItemsList\":[\n        {\n          \"disp\": \"Create a deal\",\n          \"value\": \"option1\"\n        },\n        {\n          \"disp\": \"Update existing deal\",\n          \"value\": \"option2\",\n          \"helptext\": \"Last Created Open deal will be updated in Pipedrive. <a href='' target='blank'>Learn More</a>\"\n        },\n        {\n          \"disp\": \"Do Nothing\",\n          \"value\": \"option3\"\n        }\n      ],\n        \"defaultVal\": tpConfig.syncRulesDeals.subUpdated || \"option3\"\n    },\n    {  \n      \"dispName\":\"... subscription is <b>deleted</b>\",\n      \"req\":\"false\",\n      \"type\":\"DROPDOWN_DYNAMIC\",\n      \"id\":\"subDeleted\",\n      \"isDynamic\":\"true\",\n      \"request\":{\n        \"type\":\"ON_CHANGE_FETCH_INPUT\",\n        \"apiEndPoint\":{\n          \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n          \"type\":\"GET\",\n          \"headers\":{\n            \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n            \"Elements-Formula-Instance-Id\": getStagesInstanceId\n          },\n          \"input\":{\n            \"card\":\"subscription\"\n          }\n        }\n      },\n      \"dropDownItemsList\":[\n        {\n          \"disp\": \"Update existing deal\",\n          \"value\": \"option2\",\n          \"helptext\": \"Last Created Open deal will be updated in Pipedrive. <a href='' target='blank'>Learn More</a>\"\n        },\n        {\n          \"disp\": \"Do Nothing\",\n          \"value\": \"option3\"\n        }\n      ],\n        \"defaultVal\": tpConfig.syncRulesDeals.subDeleted || \"option3\"\n    },\n    {  \n      \"dispName\":\"... subscription is <b>paused</b>\",\n      \"req\":\"false\",\n      \"type\":\"DROPDOWN_DYNAMIC\",\n      \"id\":\"subPaused\",\n      \"isDynamic\":\"true\",\n      \"request\":{\n        \"type\":\"ON_CHANGE_FETCH_INPUT\",\n        \"apiEndPoint\":{\n          \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n          \"type\":\"GET\",\n          \"headers\":{\n            \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n            \"Elements-Formula-Instance-Id\": getStagesInstanceId\n          },\n          \"input\":{\n            \"card\":\"subscription\"\n          }\n        }\n      },\n      \"dropDownItemsList\":[\n        {\n          \"disp\": \"Update existing deal\",\n          \"value\": \"option2\",\n          \"helptext\": \"Last Created Open deal will be updated in Pipedrive. <a href='' target='blank'>Learn More</a>\"\n        },\n        {\n          \"disp\": \"Do Nothing\",\n          \"value\": \"option3\"\n        }\n      ],\n        \"defaultVal\": tpConfig.syncRulesDeals.subPaused || \"option3\"\n    },\n    {  \n      \"dispName\":\"... subscription is <b>resumed</b>\",\n      \"req\":\"false\",\n      \"type\":\"DROPDOWN_DYNAMIC\",\n      \"id\":\"subResumed\",\n      \"isDynamic\":\"true\",\n      \"request\":{\n        \"type\":\"ON_CHANGE_FETCH_INPUT\",\n        \"apiEndPoint\":{\n          \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n          \"type\":\"GET\",\n          \"headers\":{\n            \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n            \"Elements-Formula-Instance-Id\": getStagesInstanceId\n          },\n          \"input\":{\n            \"card\":\"subscription\"\n          }\n        }\n      },\n      \"dropDownItemsList\":[\n        {\n          \"disp\": \"Update existing deal\",\n          \"value\": \"option2\",\n          \"helptext\": \"Last Created Open deal will be updated in Pipedrive. <a href='' target='blank'>Learn More</a>\"\n        },\n        {\n          \"disp\": \"Do Nothing\",\n          \"value\": \"option3\"\n        }\n      ],\n        \"defaultVal\": tpConfig.syncRulesDeals.subResumed || \"option3\"\n    },\n    {  \n      \"dispName\":\"... subscription is <b>cancelled</b>\",\n      \"req\":\"false\",\n      \"type\":\"DROPDOWN_DYNAMIC\",\n      \"id\":\"subCancelled\",\n      \"isDynamic\":\"true\",\n      \"request\":{\n        \"type\":\"ON_CHANGE_FETCH_INPUT\",\n        \"apiEndPoint\":{\n          \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n          \"type\":\"GET\",\n          \"headers\":{\n            \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n            \"Elements-Formula-Instance-Id\": getStagesInstanceId\n          },\n          \"input\":{\n            \"card\":\"subscription\"\n          }\n        }\n      },\n      \"dropDownItemsList\":[\n        {\n          \"disp\": \"Update existing deal\",\n          \"value\": \"option2\",\n          \"helptext\": \"Last Created Open deal will be updated in Pipedrive. <a href='' target='blank'>Learn More</a>\"\n        },\n        {\n          \"disp\": \"Do Nothing\",\n          \"value\": \"option3\"\n        }\n      ],\n        \"defaultVal\": tpConfig.syncRulesDeals.subCancelled || \"option3\"\n    },\n    {  \n      \"dispName\":\"... subscription is <b>reactivated</b>\",\n      \"req\":\"false\",\n      \"type\":\"DROPDOWN_DYNAMIC\",\n      \"id\":\"subReactivated\",\n      \"isDynamic\":\"true\",\n      \"isSeperator\":true,\n      \"request\":{\n        \"type\":\"ON_CHANGE_FETCH_INPUT\",\n        \"apiEndPoint\":{\n          \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n          \"type\":\"GET\",\n          \"headers\":{\n            \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n            \"Elements-Formula-Instance-Id\": getStagesInstanceId\n          },\n          \"input\":{\n            \"card\":\"subscription\"\n          }\n        }\n      },\n      \"dropDownItemsList\":[\n        {\n          \"disp\": \"Create a deal\",\n          \"value\": \"option1\"\n        },\n        {\n          \"disp\": \"Update existing deal\",\n          \"value\": \"option2\",\n          \"helptext\": \"Last Created Open deal will be updated in Pipedrive. <a href='' target='blank'>Learn More</a>\"\n        },\n        {\n          \"disp\": \"Do Nothing\",\n          \"value\": \"option3\"\n        }\n      ],\n        \"defaultVal\": tpConfig.syncRulesDeals.subReactivated || \"option3\"\n    },\n    {  \n      \"dispName\":\"Choose how you'd like to <b>update deal value</b> in Pipedrive\",\n      \"req\":\"false\",\n      \"type\":\"DROPDOWN\",\n      \"id\":\"howToUpdateDealValue\",\n      \"allowedValues\":{\n          \"option1\": \"Use Recurring Items Total\",\n          \"option2\": \"Use invoice amount\",\n          // \"option3\": \"Use Subscription MRR\",\n          \"option4\": \"Don't Update Deal Value\",\n      },\n        \"defaultVal\": (tpConfig.syncRulesDeals.howToUpdateDealValue !== undefined) ? tpConfig.syncRulesDeals.howToUpdateDealValue : \"option2\"\n    },\n    {       \n    \"dispName\":\"Allow Chargebee to add notes to deals\",\n      \"desc\":\"Enable if you want Chargebee to add notes to deals when changes are made to deal stage or deal value. <a href=\\\"https://www.chargebee.com\\\" target=\\\"blank\\\">Learn More</a>\",\n      \"req\":\"false\",\n      \"type\":\"TOGGLE\",\n      \"id\":\"addNotesSubscription\",\n      \"subCaption\":\"Example: \\\"Deal worth USD 99 created due to subscription (#12dfgh) creation in Chargebee\\\"\",\n      \"defaultVal\": ((tpConfig.syncRulesDeals.addNotesSubscription === \"true\") ? true : false) || false\n    }\n  ];\n  for(var i=0; i < newParams.length; i++){\n    if((newParams[i]['id'] === \"subCreated\") && (tpConfig.syncRulesDeals.subCreated !== \"option3\")){\n      pipeline = {\n        \"dispName\":\"<p style='padding-left: 10px;'>- Choose the pipeline you'd like to add this deal to </p>\",\n        \"req\":\"false\",\n        \"id\":\"subCreatedPipeline\",\n        \"type\":\"DROPDOWN_DYNAMIC\",\n        \"dropDownItemsList\": pipelineList,\n        \"isDynamic\":\"true\",\n        \"request\":{\n            \"type\":\"ON_CHANGE_FETCH_INPUT\",\n            \"apiEndPoint\":{\n                \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                \"type\":\"GET\",\n                \"headers\":{\n                    \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                    \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                },\n                \"input\":{\n                    \"card\":\"subscription\",\n                    \"selectedPipeline\" : \"subCreatedPipeline\"\n                }\n            }\n        },\n        \"defaultVal\": tpConfig.syncRulesDeals.subCreatedPipeline || \"1\"\n      };\n      stage = {\n          \"dispName\":\"<p style='padding-left: 10px;'>- Choose the stage you'd like to add this deal to\",\n          \"req\":\"false\",\n          \"type\":\"DROPDOWN_DYNAMIC\",\n          \"id\":\"subCreatedStage\",\n          \"request\":{\n              \"type\":\"ON_CHANGE_FETCH_INPUT\",\n              \"apiEndPoint\":{\n                  \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                  \"type\":\"GET\",\n                  \"headers\":{\n                      \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                      \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                  },\n                  \"input\":{\n                      \"id\": \"chargebee\"\n                  }\n              }\n          },\n          \"dropDownItemsList\": stagesList[(tpConfig.syncRulesDeals.subCreatedPipeline)-1] || stagesList[0],\n          \"defaultVal\": tpConfig.syncRulesDeals.subCreatedStage\n      };\n      newParams.splice(i+1,0,pipeline);\n      newParams.splice(i+2,0,stage);\n    }\n    if((newParams[i]['id'] === \"subUpdated\") && (tpConfig.syncRulesDeals.subUpdated !== \"option3\")){\n      pipeline = {\n        \"dispName\":\"<p style='padding-left: 10px;'>- Choose the pipeline you'd like to add this deal to </p>\",\n        \"req\":\"false\",\n        \"id\":\"subUpdatedPipeline\",\n        \"type\":\"DROPDOWN_DYNAMIC\",\n        \"dropDownItemsList\": pipelineList,\n        \"isDynamic\":\"true\",\n        \"request\":{\n            \"type\":\"ON_CHANGE_FETCH_INPUT\",\n            \"apiEndPoint\":{\n                \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                \"type\":\"GET\",\n                \"headers\":{\n                    \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                    \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                },\n                \"input\":{\n                    \"card\":\"subscription\",\n                    \"selectedPipeline\" : \"subUpdatedPipeline\"\n                }\n            }\n        },\n        \"defaultVal\": tpConfig.syncRulesDeals.subUpdatedPipeline || \"1\"\n      };\n      stage = {\n          \"dispName\":\"<p style='padding-left: 10px;'>- Choose the stage you'd like to add this deal to\",\n          \"req\":\"false\",\n          \"type\":\"DROPDOWN_DYNAMIC\",\n          \"id\":\"subUpdatedStage\",\n          \"request\":{\n              \"type\":\"ON_CHANGE_FETCH_INPUT\",\n              \"apiEndPoint\":{\n                  \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                  \"type\":\"GET\",\n                  \"headers\":{\n                      \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                      \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                  },\n                  \"input\":{\n                      \"id\": \"chargebee\"\n                  }\n              }\n          },\n          \"dropDownItemsList\": stagesList[(tpConfig.syncRulesDeals.subUpdatedPipeline)-1] || stagesList[0],\n          \"defaultVal\": tpConfig.syncRulesDeals.subUpdatedStage\n      };\n      newParams.splice(i+1,0,pipeline);\n      newParams.splice(i+2,0,stage);\n    }\n    if((newParams[i]['id'] === \"subDeleted\") && (tpConfig.syncRulesDeals.subDeleted !== \"option3\")){\n      pipeline = {\n        \"dispName\":\"<p style='padding-left: 10px;'>- Choose the pipeline you'd like to add this deal to </p>\",\n        \"req\":\"false\",\n        \"id\":\"subDeletedPipeline\",\n        \"type\":\"DROPDOWN_DYNAMIC\",\n        \"dropDownItemsList\": pipelineList,\n        \"isDynamic\":\"true\",\n        \"request\":{\n            \"type\":\"ON_CHANGE_FETCH_INPUT\",\n            \"apiEndPoint\":{\n                \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                \"type\":\"GET\",\n                \"headers\":{\n                    \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                    \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                },\n                \"input\":{\n                    \"card\":\"subscription\",\n                    \"selectedPipeline\" : \"subDeletedPipeline\"\n                }\n            }\n        },\n        \"defaultVal\": tpConfig.syncRulesDeals.subDeletedPipeline || \"1\"\n      };\n      stage = {\n          \"dispName\":\"<p style='padding-left: 10px;'>- Choose the stage you'd like to add this deal to\",\n          \"req\":\"false\",\n          \"type\":\"DROPDOWN_DYNAMIC\",\n          \"id\":\"subDeletedStage\",\n          \"request\":{\n              \"type\":\"ON_CHANGE_FETCH_INPUT\",\n              \"apiEndPoint\":{\n                  \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                  \"type\":\"GET\",\n                  \"headers\":{\n                      \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                      \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                  },\n                  \"input\":{\n                      \"id\": \"chargebee\"\n                  }\n              }\n          },\n          \"dropDownItemsList\": stagesList[(tpConfig.syncRulesDeals.subDeletedPipeline)-1] || stagesList[0],\n          \"defaultVal\": tpConfig.syncRulesDeals.subDeletedStage\n      };\n      newParams.splice(i+1,0,pipeline);\n      newParams.splice(i+2,0,stage);\n    }\n    if((newParams[i]['id'] === \"subPaused\") && (tpConfig.syncRulesDeals.subPaused !== \"option3\")){\n      pipeline = {\n        \"dispName\":\"<p style='padding-left: 10px;'>- Choose the pipeline you'd like to add this deal to </p>\",\n        \"req\":\"false\",\n        \"id\":\"subPausedPipeline\",\n        \"type\":\"DROPDOWN_DYNAMIC\",\n        \"dropDownItemsList\": pipelineList,\n        \"isDynamic\":\"true\",\n        \"request\":{\n            \"type\":\"ON_CHANGE_FETCH_INPUT\",\n            \"apiEndPoint\":{\n                \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                \"type\":\"GET\",\n                \"headers\":{\n                    \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                    \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                },\n                \"input\":{\n                    \"card\":\"subscription\",\n                    \"selectedPipeline\" : \"subPausedPipeline\"\n                }\n            }\n        },\n        \"defaultVal\": tpConfig.syncRulesDeals.subPausedPipeline || \"1\"\n      };\n      stage = {\n          \"dispName\":\"<p style='padding-left: 10px;'>- Choose the stage you'd like to add this deal to\",\n          \"req\":\"false\",\n          \"type\":\"DROPDOWN_DYNAMIC\",\n          \"id\":\"subPausedStage\",\n          \"request\":{\n              \"type\":\"ON_CHANGE_FETCH_INPUT\",\n              \"apiEndPoint\":{\n                  \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                  \"type\":\"GET\",\n                  \"headers\":{\n                      \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                      \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                  },\n                  \"input\":{\n                      \"id\": \"chargebee\"\n                  }\n              }\n          },\n          \"dropDownItemsList\": stagesList[(tpConfig.syncRulesDeals.subPausedPipeline)-1] || stagesList[0],\n          \"defaultVal\": tpConfig.syncRulesDeals.subPausedStage\n      };\n      newParams.splice(i+1,0,pipeline);\n      newParams.splice(i+2,0,stage);\n    }\n    if((newParams[i]['id'] === \"subResumed\") && (tpConfig.syncRulesDeals.subResumed !== \"option3\")){\n      pipeline = {\n        \"dispName\":\"<p style='padding-left: 10px;'>- Choose the pipeline you'd like to add this deal to </p>\",\n        \"req\":\"false\",\n        \"id\":\"subResumedPipeline\",\n        \"type\":\"DROPDOWN_DYNAMIC\",\n        \"dropDownItemsList\": pipelineList,\n        \"isDynamic\":\"true\",\n        \"request\":{\n            \"type\":\"ON_CHANGE_FETCH_INPUT\",\n            \"apiEndPoint\":{\n                \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                \"type\":\"GET\",\n                \"headers\":{\n                    \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                    \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                },\n                \"input\":{\n                    \"card\":\"subscription\",\n                    \"selectedPipeline\" : \"subResumedPipeline\"\n                }\n            }\n        },\n        \"defaultVal\": tpConfig.syncRulesDeals.subResumedPipeline || \"1\"\n      };\n      stage = {\n          \"dispName\":\"<p style='padding-left: 10px;'>- Choose the stage you'd like to add this deal to\",\n          \"req\":\"false\",\n          \"type\":\"DROPDOWN_DYNAMIC\",\n          \"id\":\"subResumedStage\",\n          \"request\":{\n              \"type\":\"ON_CHANGE_FETCH_INPUT\",\n              \"apiEndPoint\":{\n                  \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                  \"type\":\"GET\",\n                  \"headers\":{\n                      \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                      \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                  },\n                  \"input\":{\n                      \"id\": \"chargebee\"\n                  }\n              }\n          },\n          \"dropDownItemsList\": stagesList[(tpConfig.syncRulesDeals.subResumedPipeline)-1] || stagesList[0],\n          \"defaultVal\": tpConfig.syncRulesDeals.subResumedStage\n      };\n      newParams.splice(i+1,0,pipeline);\n      newParams.splice(i+2,0,stage);\n    }\n    if((newParams[i]['id'] === \"subCancelled\") && (tpConfig.syncRulesDeals.subCancelled !== \"option3\")){\n      pipeline = {\n        \"dispName\":\"<p style='padding-left: 10px;'>- Choose the pipeline you'd like to add this deal to </p>\",\n        \"req\":\"false\",\n        \"id\":\"subCancelledPipeline\",\n        \"type\":\"DROPDOWN_DYNAMIC\",\n        \"dropDownItemsList\": pipelineList,\n        \"isDynamic\":\"true\",\n        \"request\":{\n            \"type\":\"ON_CHANGE_FETCH_INPUT\",\n            \"apiEndPoint\":{\n                \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                \"type\":\"GET\",\n                \"headers\":{\n                    \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                    \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                },\n                \"input\":{\n                    \"card\":\"subscription\",\n                    \"selectedPipeline\" : \"subCancelledPipeline\"\n                }\n            }\n        },\n        \"defaultVal\": tpConfig.syncRulesDeals.subCancelledPipeline || \"1\"\n      };\n      stage = {\n          \"dispName\":\"<p style='padding-left: 10px;'>- Choose the stage you'd like to add this deal to\",\n          \"req\":\"false\",\n          \"type\":\"DROPDOWN_DYNAMIC\",\n          \"id\":\"subCancelledStage\",\n          \"request\":{\n              \"type\":\"ON_CHANGE_FETCH_INPUT\",\n              \"apiEndPoint\":{\n                  \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                  \"type\":\"GET\",\n                  \"headers\":{\n                      \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                      \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                  },\n                  \"input\":{\n                      \"id\": \"chargebee\"\n                  }\n              }\n          },\n          \"dropDownItemsList\": stagesList[(tpConfig.syncRulesDeals.subCancelledPipeline)-1] || stagesList[0],\n          \"defaultVal\": tpConfig.syncRulesDeals.subCancelledStage\n      };\n      newParams.splice(i+1,0,pipeline);\n      newParams.splice(i+2,0,stage);\n    }\n    if((newParams[i]['id'] === \"subReactivated\") && (tpConfig.syncRulesDeals.subReactivated !== \"option3\")){\n      pipeline = {\n        \"dispName\":\"<p style='padding-left: 10px;'>- Choose the pipeline you'd like to add this deal to </p>\",\n        \"req\":\"false\",\n        \"id\":\"subReactivatedPipeline\",\n        \"type\":\"DROPDOWN_DYNAMIC\",\n        \"dropDownItemsList\": pipelineList,\n        \"isDynamic\":\"true\",\n        \"request\":{\n            \"type\":\"ON_CHANGE_FETCH_INPUT\",\n            \"apiEndPoint\":{\n                \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                \"type\":\"GET\",\n                \"headers\":{\n                    \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                    \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                },\n                \"input\":{\n                    \"card\":\"subscription\",\n                    \"selectedPipeline\" : \"subReactivatedPipeline\"\n                }\n            }\n        },\n        \"defaultVal\": tpConfig.syncRulesDeals.subReactivatedPipeline || \"1\"\n      };\n      stage = {\n          \"dispName\":\"<p style='padding-left: 10px;'>- Choose the stage you'd like to add this deal to\",\n          \"req\":\"false\",\n          \"type\":\"DROPDOWN_DYNAMIC\",\n          \"isSeperator\":true,\n          \"id\":\"subReactivatedStage\",\n          \"request\":{\n              \"type\":\"ON_CHANGE_FETCH_INPUT\",\n              \"apiEndPoint\":{\n                  \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                  \"type\":\"GET\",\n                  \"headers\":{\n                      \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                      \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                  },\n                  \"input\":{\n                      \"id\": \"chargebee\"\n                  }\n              }\n          },\n          \"dropDownItemsList\": stagesList[(tpConfig.syncRulesDeals.subReactivatedPipeline)-1] || stagesList[0],\n          \"defaultVal\": tpConfig.syncRulesDeals.subReactivatedStage\n      };\n      newParams[i]['isSeperator'] = undefined;\n      newParams.splice(i+1,0,pipeline);\n      newParams.splice(i+2,0,stage);\n    }\n  }\n  card.cards[1].card.params = newParams;\n  let newParams_2 = [\n          {  \n            \"dispName\":\"... invoice is <b>created</b>\",\n            \"req\":\"false\",\n            \"type\":\"DROPDOWN_DYNAMIC\",\n            \"id\":\"invCreated\",\n            \"isDynamic\":\"true\",\n            \"request\":{\n              \"type\":\"ON_CHANGE_FETCH_INPUT\",\n              \"apiEndPoint\":{\n                \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                \"type\":\"GET\",\n                \"headers\":{\n                  \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                  \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                },\n                \"input\":{\n                  \"card\":\"invoice\"\n                }\n              }\n            },\n            \"dropDownItemsList\":[\n              {\n                \"disp\": \"Create a deal\",\n                \"value\": \"option1\"\n              },\n              {\n                \"disp\": \"Update existing deal\",\n                \"value\": \"option2\",\n                \"helptext\": \"Last Created Open deal will be updated in Pipedrive. <a href='' target='blank'>Learn More</a>\"\n              },\n              {\n                \"disp\": \"Do Nothing\",\n                \"value\": \"option3\"\n              }\n            ],\n              \"defaultVal\": tpConfig.syncRulesDeals.invCreated || \"option3\"\n          },\n          {  \n            \"dispName\":\"... invoice is <b>deleted</b>\",\n            \"req\":\"false\",\n            \"type\":\"DROPDOWN_DYNAMIC\",\n            \"id\":\"invDeleted\",\n            \"isDynamic\":\"true\",\n            \"request\":{\n              \"type\":\"ON_CHANGE_FETCH_INPUT\",\n              \"apiEndPoint\":{\n                \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                \"type\":\"GET\",\n                \"headers\":{\n                  \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                  \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                },\n                \"input\":{\n                  \"card\":\"invoice\"\n                }\n              }\n            },\n            \"dropDownItemsList\":[\n              {\n                \"disp\": \"Update existing deal\",\n                \"value\": \"option2\",\n                \"helptext\": \"Last Created Open deal will be updated in Pipedrive. <a href='' target='blank'>Learn More</a>\"\n              },\n              {\n                \"disp\": \"Do Nothing\",\n                \"value\": \"option3\"\n              }\n            ],\n              \"defaultVal\": tpConfig.syncRulesDeals.invDeleted || \"option3\"\n          },\n          {  \n            \"dispName\":\"... invoice is <b>paid</b>\",\n            \"req\":\"false\",\n            \"type\":\"DROPDOWN_DYNAMIC\",\n            \"id\":\"invPaid\",\n            \"isDynamic\":\"true\",\n            \"request\":{\n              \"type\":\"ON_CHANGE_FETCH_INPUT\",\n              \"apiEndPoint\":{\n                \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                \"type\":\"GET\",\n                \"headers\":{\n                  \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                  \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                },\n                \"input\":{\n                  \"card\":\"invoice\"\n                }\n              }\n            },\n            \"dropDownItemsList\":[\n              {\n                \"disp\": \"Update existing deal\",\n                \"value\": \"option2\",\n                \"helptext\": \"Last Created Open deal will be updated in Pipedrive. <a href='' target='blank'>Learn More</a>\"\n              },\n              {\n                \"disp\": \"Do Nothing\",\n                \"value\": \"option3\"\n              }\n            ],\n              \"defaultVal\": tpConfig.syncRulesDeals.invPaid || \"option3\"\n          },\n          {  \n            \"dispName\":\"... invoice is <b>voided</b>\",\n            \"req\":\"false\",\n            \"type\":\"DROPDOWN_DYNAMIC\",\n            \"id\":\"invVoided\",\n            \"isDynamic\":\"true\",\n            \"isSeperator\": true,\n            \"request\":{\n              \"type\":\"ON_CHANGE_FETCH_INPUT\",\n              \"apiEndPoint\":{\n                \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n                \"type\":\"GET\",\n                \"headers\":{\n                  \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                  \"Elements-Formula-Instance-Id\": getStagesInstanceId\n                },\n                \"input\":{\n                  \"card\":\"invoice\"\n                }\n              }\n            },\n            \"dropDownItemsList\":[\n              {\n                \"disp\": \"Update existing deal\",\n                \"value\": \"option2\",\n                \"helptext\": \"Last Created Open deal will be updated in Pipedrive. <a href='' target='blank'>Learn More</a>\"\n              },\n              {\n                \"disp\": \"Do Nothing\",\n                \"value\": \"option3\"\n              }\n            ],\n              \"defaultVal\": tpConfig.syncRulesDeals.invVoided || \"option3\"\n          },\n          {       \n          \"dispName\":\"Update deal value with invoice amount\",\n            \"desc\":\"Disable if you don't want Chargebee to deal value in Pipedrive with invoice amount.\",\n            \"req\":\"false\",\n            \"type\":\"TOGGLE\",\n            \"id\":\"updateDealValueWithInvoice\",\n            \"defaultVal\": ((tpConfig.syncRulesDeals.updateDealValueWithInvoice === \"true\") ? true : false) || \"option3\"\n          },\n          {       \n          \"dispName\":\"Allow Chargebee to add notes to deals\",\n            \"desc\":\"Enable if you want Chargebee to add notes to deals when changes are made to deal stage or deal value. <a href=\\\"https://www.chargebee.com\\\" target=\\\"blank\\\">Learn More</a>\",\n            \"req\":\"false\",\n            \"type\":\"TOGGLE\",\n            \"id\":\"addNotesInvoice\",\n            \"subCaption\":\"Example: \\\"Deal worth USD 99 created due to subscription (#12dfgh) creation in Chargebee\\\"\",\n            \"defaultVal\": ((tpConfig.syncRulesDeals.addNotesInvoice === \"true\") ? true : false) || false\n          }\n  ];\n  for(var j=0; j < newParams_2.length; j++){\n    if((newParams_2[j]['id'] === \"invCreated\") && (tpConfig.syncRulesDeals.invCreated !== \"option3\")){\n      pipeline = {  \n        \"dispName\":\"<p style='padding-left: 10px;'>- Choose the pipeline you'd like to add this deal to\",\n        \"req\":\"false\",\n        \"type\":\"DROPDOWN_DYNAMIC\",\n        \"id\":\"invCreatedPipeline\",\n        \"isDynamic\":\"true\",\n        \"request\":{\n          \"type\":\"ON_CHANGE_FETCH_INPUT\",\n          \"apiEndPoint\":{\n          \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n          \"type\":\"GET\",\n          \"headers\":{\n            \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n            \"Elements-Formula-Instance-Id\": getStagesInstanceId\n          },\n          \"input\":{\n              \"id\":\"chargebee\",\n              \"card\":\"invoice\",\n              \"selectedPipeline\" : \"invCreatedPipeline\"\n              }\n            }\n          },\n          \"dropDownItemsList\": pipelineList,\n          \"defaultVal\": tpConfig.syncRulesDeals.invCreatedPipeline || \"1\"\n      };\n      stage = {  \n          \"id\":\"invCreatedStage\",\n          \"dispName\":\"<p style='padding-left: 10px;'>- Choose the stage you'd like to add this deal to\",\n          \"req\":\"false\",\n          \"type\":\"DROPDOWN_DYNAMIC\",\n          \"request\":{\n            \"type\":\"ON_CHANGE_FETCH_INPUT\",\n            \"apiEndPoint\":{\n              \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n              \"type\":\"GET\",\n              \"headers\":{\n                \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                \"Elements-Formula-Instance-Id\": getStagesInstanceId\n              },\n              \"input\":{\n                \"id\":\"chargebee\"\n              }\n            }\n          },\n          \"dropDownItemsList\": stagesList[(tpConfig.syncRulesDeals.invCreatedPipeline-1)] || stagesList[0],\n          \"defaultVal\": tpConfig.syncRulesDeals.invCreatedStage\n        };\n      newParams_2.splice(j+1,0,pipeline);\n      newParams_2.splice(j+2,0,stage);\n    }\n    if((newParams_2[j]['id'] === \"invDeleted\") && (tpConfig.syncRulesDeals.invDeleted !== \"option3\")){\n      pipeline = {  \n        \"dispName\":\"<p style='padding-left: 10px;'>- Choose the pipeline you'd like to add this deal to\",\n        \"req\":\"false\",\n        \"type\":\"DROPDOWN_DYNAMIC\",\n        \"id\":\"invDeletedPipeline\",\n        \"isDynamic\":\"true\",\n        \"request\":{\n          \"type\":\"ON_CHANGE_FETCH_INPUT\",\n          \"apiEndPoint\":{\n          \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n          \"type\":\"GET\",\n          \"headers\":{\n            \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n            \"Elements-Formula-Instance-Id\": getStagesInstanceId\n          },\n          \"input\":{\n              \"id\":\"chargebee\",\n              \"card\":\"invoice\",\n              \"selectedPipeline\" : \"invDeletedPipeline\"\n              }\n            }\n          },\n          \"dropDownItemsList\": pipelineList,\n          \"defaultVal\": tpConfig.syncRulesDeals.invDeletedPipeline || \"1\"\n      };\n      stage = {  \n          \"id\":\"invDeletedStage\",\n          \"dispName\":\"<p style='padding-left: 10px;'>- Choose the stage you'd like to add this deal to\",\n          \"req\":\"false\",\n          \"type\":\"DROPDOWN_DYNAMIC\",\n          \"request\":{\n            \"type\":\"ON_CHANGE_FETCH_INPUT\",\n            \"apiEndPoint\":{\n              \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n              \"type\":\"GET\",\n              \"headers\":{\n                \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                \"Elements-Formula-Instance-Id\": getStagesInstanceId\n              },\n              \"input\":{\n                \"id\":\"chargebee\"\n              }\n            }\n          },\n          \"dropDownItemsList\": stagesList[(tpConfig.syncRulesDeals.invDeletedPipeline-1)] || stagesList[0],\n          \"defaultVal\": tpConfig.syncRulesDeals.invDeletedStage\n        };\n      newParams_2.splice(j+1,0,pipeline);\n      newParams_2.splice(j+2,0,stage);\n    }\n    if((newParams_2[j]['id'] === \"invPaid\") && (tpConfig.syncRulesDeals.invPaid !== \"option3\")){\n      pipeline = {  \n        \"dispName\":\"<p style='padding-left: 10px;'>- Choose the pipeline you'd like to add this deal to\",\n        \"req\":\"false\",\n        \"type\":\"DROPDOWN_DYNAMIC\",\n        \"id\":\"invPaidPipeline\",\n        \"isDynamic\":\"true\",\n        \"request\":{\n          \"type\":\"ON_CHANGE_FETCH_INPUT\",\n          \"apiEndPoint\":{\n          \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n          \"type\":\"GET\",\n          \"headers\":{\n            \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n            \"Elements-Formula-Instance-Id\": getStagesInstanceId\n          },\n          \"input\":{\n              \"id\":\"chargebee\",\n              \"card\":\"invoice\",\n              \"selectedPipeline\" : \"invPaidPipeline\"\n              }\n            }\n          },\n          \"dropDownItemsList\": pipelineList,\n          \"defaultVal\": tpConfig.syncRulesDeals.invPaidPipeline || \"1\"\n      };\n      stage = {  \n          \"id\":\"invPaidStage\",\n          \"dispName\":\"<p style='padding-left: 10px;'>- Choose the stage you'd like to add this deal to\",\n          \"req\":\"false\",\n          \"type\":\"DROPDOWN_DYNAMIC\",\n          \"request\":{\n            \"type\":\"ON_CHANGE_FETCH_INPUT\",\n            \"apiEndPoint\":{\n              \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n              \"type\":\"GET\",\n              \"headers\":{\n                \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                \"Elements-Formula-Instance-Id\": getStagesInstanceId\n              },\n              \"input\":{\n                \"id\":\"chargebee\"\n              }\n            }\n          },\n          \"dropDownItemsList\": stagesList[(tpConfig.syncRulesDeals.invPaidPipeline-1)] || stagesList[0],\n          \"defaultVal\": tpConfig.syncRulesDeals.invPaidStage\n        };\n      newParams_2.splice(j+1,0,pipeline);\n      newParams_2.splice(j+2,0,stage);\n    }\n    if((newParams_2[j]['id'] === \"invVoided\") && (tpConfig.syncRulesDeals.invVoided !== \"option3\")){\n      pipeline = {  \n        \"dispName\":\"<p style='padding-left: 10px;'>- Choose the pipeline you'd like to add this deal to\",\n        \"req\":\"false\",\n        \"type\":\"DROPDOWN_DYNAMIC\",\n        \"id\":\"invVoidedPipeline\",\n        \"isDynamic\":\"true\",\n        \"request\":{\n          \"type\":\"ON_CHANGE_FETCH_INPUT\",\n          \"apiEndPoint\":{\n          \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n          \"type\":\"GET\",\n          \"headers\":{\n            \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n            \"Elements-Formula-Instance-Id\": getStagesInstanceId\n          },\n          \"input\":{\n              \"id\":\"chargebee\",\n              \"card\":\"invoice\",\n              \"selectedPipeline\" : \"invVoidedPipeline\"\n              }\n            }\n          },\n          \"dropDownItemsList\": pipelineList,\n          \"defaultVal\": tpConfig.syncRulesDeals.invVoidedPipeline || \"1\"\n      };\n      stage = {  \n          \"id\":\"invVoidedStage\",\n          \"dispName\":\"<p style='padding-left: 10px;'>- Choose the stage you'd like to add this deal to\",\n          \"req\":\"false\",\n          \"isSeperator\": true,\n          \"type\":\"DROPDOWN_DYNAMIC\",\n          \"request\":{\n            \"type\":\"ON_CHANGE_FETCH_INPUT\",\n            \"apiEndPoint\":{\n              \"apiUrl\":cloudElementsUrl+\"/pipedrive/getStages\",\n              \"type\":\"GET\",\n              \"headers\":{\n                \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                \"Elements-Formula-Instance-Id\": getStagesInstanceId\n              },\n              \"input\":{\n                \"id\":\"chargebee\"\n              }\n            }\n          },\n          \"dropDownItemsList\": stagesList[(tpConfig.syncRulesDeals.invVoidedPipeline-1)] || stagesList[0],\n          \"defaultVal\": tpConfig.syncRulesDeals.invVoidedStage\n        };\n      newParams_2[j]['isSeperator'] = undefined;\n      newParams_2.splice(j+1,0,pipeline);\n      newParams_2.splice(j+2,0,stage);\n    }\n  }\n  card.cards[3].card.params = newParams_2;\n}\n\ndone(card);"}},{"id":215728,"onSuccess":["InputParams"],"onFailure":[],"name":"test","type":"filter","properties":{"body":"done(true);"}},{"id":215729,"onSuccess":["getNewAccessToken"],"onFailure":[],"name":"triggerRefreshToken","type":"script","properties":{"body":"// let apiKey = \"test_FdeKa4XuFlZ6ZxikZjIrNLu1VNOkocOq\"\n// let siteName=\"ipaas-test\";\n// let siteDomain=\"chargebee-labs.com\";\n// let integration_name = \"pipedrive\";\n// let password = \"\";\n\nlet instanceId = steps.getTpConfig.response.body.third_party_configuration.config_json.cloudElements.formulas.formula_GetRefreshToken.instance;\n//Instance id of getAccessTokenFormula formula\n\nlet triggerParams = {\n  url: \"/formulas/instances/\"+instanceId+\"/executions\",\n  body: {\n    apiKey: steps.InputParams.params.input.apiKey,\n    siteName: steps.InputParams.params.input.siteName,\n    siteDomain: steps.InputParams.params.input.siteDomain,\n    integration_name: steps.InputParams.params.input.integration_name,\n    password: steps.InputParams.params.input.password\n  }\n};\n\ndone({\n  triggerParams: triggerParams,\n  instanceId: instanceId\n});\n\n"}},{"id":215730,"onSuccess":["updateTpConfig"],"onFailure":[],"name":"updateConfiguration","type":"script","properties":{"body":"let result = steps.getResultAccessToken.response.body;\nlet configuration = steps.getTpConfig.response.body.third_party_configuration.config_json;\n\nlet OAuthData = null;\n\nfor(var i=0; i < result.length; i++){\n  if(result[i]['key'] === \"Success.result\"){\n    OAuthData = JSON.parse(result[i]['value']);\n    break;\n  }\n}\n\nif(OAuthData !== null){\n configuration.cloudElements.OAuth_Parameters = OAuthData.OAuthDetails;\n}\n\nlet body = {\n     site_name: steps.InputParams.params.input.siteName,\n     api_key: steps.InputParams.params.input.apiKey,\n     integration_name: steps.InputParams.params.input.integration_name,\n     config_json: configuration\n  };\n\n\ndone({\n  body :body,\n  OAuthData: OAuthData\n});"}},{"id":215731,"onSuccess":["updateThirdPartyInstance"],"onFailure":[],"name":"updateElementInstanceParams","type":"script","properties":{"body":"let thirdPartyElementId = steps.getTpConfig.response.body.third_party_configuration.config_json.cloudElements.thirdParty.instance || null;\n\nlet config = steps.getThirdPartyInstanceDetails.response.body;\n\n let accessToken  = steps.updateConfiguration.OAuthData.OAuthDetails.access_token;\n\n config.configuration['access_token'] = accessToken;\n\nlet updateParams={\n  url: \"/instances/\"+thirdPartyElementId,\n  body: config\n};\n\ndone({\n  updateParams: updateParams\n});"}},{"id":215732,"onSuccess":["sendProcessCard_success"],"onFailure":[],"name":"updateThirdPartyInstance","type":"request","properties":{"method":"PUT","api":"${steps.updateElementInstanceParams.updateParams.url}","body":"${steps.updateElementInstanceParams.updateParams.body}"}},{"id":215733,"onSuccess":["getThirdPartyInstanceDetails"],"onFailure":[],"name":"updateTpConfig","type":"httpRequest","properties":{"method":"POST","url":"${steps.InputParams.getTpConfigParams.updateUrl}","body":"${steps.updateConfiguration.body}","headers":"${steps.InputParams.getTpConfigParams.headers}"}},{"id":226254,"onSuccess":["sendProcessCard_instanceCreation"],"onFailure":[],"name":"updateTpConfig_2","type":"httpRequest","properties":{"method":"POST","url":"${steps.updateTpConfigParams_2.tpConfigUpdateParams.url}","body":"${steps.updateTpConfigParams_2.tpConfigUpdateParams.body}","headers":"${steps.updateTpConfigParams_2.tpConfigUpdateParams.headers}"}},{"id":226251,"onSuccess":["updateTpConfig_2"],"onFailure":[],"name":"updateTpConfigParams_2","type":"script","properties":{"body":"let configJson = steps.getTpConfig.response.body.third_party_configuration.config_json;\n\nif(steps.isInstanceExist.continue === true){\n  configJson.cloudElements.formulas.formula_GetRefreshToken.instance = steps.checkInstanceExist.instanceInfo.id;\n}else{\n  configJson.cloudElements.formulas.formula_GetRefreshToken.instance = steps.newInstanceCreatedInfo.id;\n}\n\nlet tpConfigUpdateParams = steps.InputParams.updateTpConfigParams;\ntpConfigUpdateParams.body.config_json = configJson;\n\ndone({\n  tpConfigUpdateParams: tpConfigUpdateParams\n});"}}],"triggers":[{"id":26033,"onSuccess":["EnvProps"],"onFailure":[],"type":"manual","async":true,"name":"trigger","properties":{}}],"subFormulas":[{"id":27953,"name":"getRefreshTokenPipedrive","userId":9541,"accountId":8529,"createdDate":"2019-07-25T10:02:28Z","steps":[{"id":195744,"onSuccess":[],"onFailure":[],"name":"bf","type":"script","properties":{"body":"done({\n  statusCode: 401,\n  result : \"Failed\"\n});"}},{"id":189608,"onSuccess":[],"onFailure":[],"name":"Failed","type":"script","properties":{"body":"done({\n  statusCode: 400,\n  result : \"Failed\"\n});"}},{"id":189599,"onSuccess":["getThirdPartyInstanceDetails"],"onFailure":["Failed"],"name":"getNewToken","type":"httpRequest","properties":{"retry":"true","method":"POST","url":"${steps.getNewToken_params.payload.url}","query":"","path":"","form":"","retryAttempts":"5","body":"${steps.getNewToken_params.payload.body}","acceptableStatusCodes":"200","headers":"${steps.getNewToken_params.payload.headers}","retryDelay":"200"}},{"id":189598,"onSuccess":["getNewToken"],"onFailure":[],"name":"getNewToken_params","type":"script","properties":{"body":"if(steps.getTpConfig.response.body.third_party_configuration.config_json.cloudElements.OAuth_Parameters === undefined){\n  done(false);\n}\n\n\nlet params = steps.getTpConfig.response.body.third_party_configuration.config_json.cloudElements.OAuth_Parameters;\n\nlet payload = {\n  url: \"https://oauth.pipedrive.com/oauth/token\",\n  headers : {\n    \"Content-Type\" : \"application/x-www-form-urlencoded\",\n    \"Authorization\" : \"Basic \" + CE.b64(params.client_info.client_id + \":\" + params.client_info.client_secret)\n  },\n  body : \"grant_type=refresh_token&refresh_token=\" + params.refresh_token\n};\n\ndone({\n  payload: payload\n});"}},{"id":190707,"onSuccess":["updateElementInstanceParams"],"onFailure":[],"name":"getThirdPartyInstanceDetails","type":"request","properties":{"api":"/instances/${steps.getTpConfig.response.body.third_party_configuration.config_json.cloudElements.thirdParty.instance}","method":"GET"}},{"id":189597,"onSuccess":["getNewToken_params"],"onFailure":[],"name":"getTpConfig","type":"httpRequest","properties":{"method":"GET","retry":"false","url":"${steps.InputParams.getTpConfigParams.url}","query":"${steps.InputParams.getTpConfigParams.query}","headers":"${steps.InputParams.getTpConfigParams.auth}"}},{"id":189596,"onSuccess":["getTpConfig"],"onFailure":[],"name":"InputParams","type":"script","properties":{"body":"let apiKey = \"test_FdeKa4XuFlZ6ZxikZjIrNLu1VNOkocOq\"\nlet siteName=\"ipaas-test\";\nlet siteDomain=\"chargebee-labs.com\";\nlet integration_name = \"pipedrive\";\nlet password = \"\";\n\n\nlet params = {\n  input:{\n    apiKey: apiKey,\n    siteName: siteName,\n    siteDomain: siteDomain,\n    integration_name: integration_name,\n    password: password\n  }\n};\n\n\nlet getTpConfigParams = {\n  url: \"https://\"+siteName+\".\"+siteDomain+\"/api/v2/third_party_configurations\",\n  auth:{\n    Authorization: \"Basic \" + CE.b64(apiKey + \":\" + password)\n  },\n  query:{\n    integration_name: integration_name\n  }\n}\n\ndone({\n  params: params,\n  getTpConfigParams: getTpConfigParams\n});"}},{"id":189609,"onSuccess":[],"onFailure":[],"name":"Success","type":"script","properties":{"body":"done({\n  statusCode: 200,\n  result : {\n    \"OAuthDetails\" : steps.updateTpConfig_params.OAuthDetails\n  }\n});"}},{"id":190705,"onSuccess":["updateThirdPartyInstance"],"onFailure":[],"name":"updateElementInstanceParams","type":"script","properties":{"body":"let thirdPartyElementId = steps.getTpConfig.response.body.third_party_configuration.config_json.cloudElements.thirdParty.instance || null;\n\nlet config = steps.getThirdPartyInstanceDetails.response.body;\n\nlet accessToken  = steps.getNewToken.response.body.access_token;\nlet tokenType = steps.getNewToken.response.body.token_type;\n\nconfig.configuration['access_token'] = tokenType + \" \" + accessToken;\n\nlet updateParams={\n  url: \"/instances/\"+thirdPartyElementId,\n  body: config\n};\n\ndone({\n  updateParams: updateParams\n});"}},{"id":190708,"onSuccess":["updateTpConfig_params"],"onFailure":[],"name":"updateThirdPartyInstance","type":"request","properties":{"api":"${steps.updateElementInstanceParams.updateParams.url}","method":"PUT","body":"${steps.updateElementInstanceParams.updateParams.body}"}},{"id":189607,"onSuccess":["Success"],"onFailure":[],"name":"updateTpConfig","type":"httpRequest","properties":{"retry":"true","method":"POST","url":"${steps.updateTpConfig_params.updateTpConfigParams.url}","retryAttempts":"5","body":"${steps.updateTpConfig_params.updateTpConfigParams.body}","headers":"${steps.updateTpConfig_params.updateTpConfigParams.headers}","retryDelay":"200"}},{"id":189601,"onSuccess":["updateTpConfig"],"onFailure":[],"name":"updateTpConfig_params","type":"script","properties":{"body":"let configuration=steps.getTpConfig.response.body.third_party_configuration.config_json;\n\nconfiguration.cloudElements.OAuth_Parameters.access_token = steps.getNewToken.response.body.token_type + \" \" + steps.getNewToken.response.body.access_token;\nconfiguration.cloudElements.OAuth_Parameters.expiry_time = Math.round((new Date().getTime())/1000) + Number(steps.getNewToken.response.body.expires_in);\nconfiguration.cloudElements.OAuth_Parameters.refresh_token = steps.getNewToken.response.body.refresh_token;\nconfiguration.cloudElements.OAuth_Parameters.scope = steps.getNewToken.response.body.scope;\nconfiguration.cloudElements.OAuth_Parameters.token_type = steps.getNewToken.response.body.token_type;\n\nlet updateTpConfigParams = {\n  url: \"https://\"+steps.InputParams.params.input.siteName+\".integrations.\"+steps.InputParams.params.input.siteDomain+\"/integrations/update_tp_integ_conf\",\n  headers: {\n    \"Content-Type\": \"application/json\",\n    \"cache-control\": \"no-cache\"\n  },\n  body: {\n     site_name: steps.InputParams.params.input.siteName,\n     api_key: steps.InputParams.params.input.apiKey,\n     integration_name: steps.InputParams.params.input.integration_name,\n     config_json: configuration\n  }\n};\n\ndone({\n  updateTpConfigParams: updateTpConfigParams,\n  OAuthDetails : configuration.cloudElements.OAuth_Parameters\n});\n\n\n"}}],"triggers":[{"id":24816,"onSuccess":["InputParams"],"onFailure":[],"type":"manual","async":true,"name":"trigger","properties":{}}],"engine":"v3","active":true,"debugLoggingEnabled":true,"singleThreaded":false,"configuration":[]}],"method":"GET","uri":"/pipedrive/syncRulesDealsSetup","engine":"v1","active":true,"debugLoggingEnabled":true,"singleThreaded":false,"api":"GET /pipedrive/syncRulesDealsSetup","configuration":[]}