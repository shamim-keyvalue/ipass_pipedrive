{"id":29411,"name":"testing-pipedriveValidateIgnore","userId":27893,"accountId":24428,"createdDate":"2019-09-05T07:00:54Z","steps":[{"id":215799,"onSuccess":["sendFinalCard"],"onFailure":[],"name":"getTpConfig","type":"httpRequest","properties":{"method":"GET","query":"${steps.InputParams.getTpConfigParams.query}","retryAttempts":"5","headers":"${steps.InputParams.getTpConfigParams.auth}","retryDelay":"200","url":"${steps.InputParams.getTpConfigParams.url}","retry":"true"}},{"id":215800,"onSuccess":["getTpConfig"],"onFailure":[],"name":"InputParams","type":"script","properties":{"body":"let apiKey = trigger.args.request.query['cb-api-key'] || null;\nlet siteName = trigger.args.request.query['cb-site-name'] || null;\nlet siteDomain = trigger.args.request.query['cb-domain'];\nlet integrationName = trigger.args.request.query['integrationName'];\nlet password = \"\";\n\n\nlet getTpConfigParams = {\n    url: \"https://\"+siteName+\".\"+siteDomain+\"/api/v2/third_party_configurations\",\n    auth:{\n      Authorization: \"Basic \" + CE.b64(apiKey + \":\" + password)\n    },\n    query:{\n      integration_name: integrationName\n    }\n};\n\ndone({\n  getTpConfigParams: getTpConfigParams\n});"}},{"id":215801,"onSuccess":[],"onFailure":[],"name":"sendFinalCard","type":"script","properties":{"body":"let cloudElementsUrl = \"https://api.cloud-elements.co.uk/elements/api-v2\";\n\nlet validationSetupInstanceId = steps.getTpConfig.response.body.third_party_configuration.config_json.cloudElements.formulas.formula_ValidateSetup.instance || null;\n\nlet card = {\n   \"cards\":[\n      {\n         \"id\" : \"check2\",\n         \"card\": {\n            \"type\" : \"ACTION\",\n            \"heading\" : \"You've ignored errors found during data validation.\",\n            \"icon\" : \"WARNING\",\n         },\n         \"isCardDone\":\"true\"\n      }\n   ],\n   \"proceed\" : {\n        \"id\": \"proceed\",\n        \"display\": \"Proceed\",\n        \"icon\": \"ARROW\",\n        \"buttonLook\": \"FILLED\",\n        \"type\": \"DIRECT_LINK\",\n        \"request\": {\n            \"type\": \"ON_CLICK_SEND_INPUT\",\n            \"apiEndPoint\": {\n                \"apiUrl\": cloudElementsUrl+\"/pipedrive/initialSyncRun\",\n                \"type\": \"GET\",\n                \"headers\": {\n                    \"Elements-Formula-Instance-Id\": steps.getTpConfig.response.body.third_party_configuration.config_json.cloudElements.formulas.formula_InitialSyncRun.instance || null\n                },\n                \"input\": {\n                    \"integrationName\": \"pipedrive\",\n                    \"initialSync\": \"true\",\n                    \"action\" : \"default\",\n                    \"fromMapping\" : \"false\"\n                }\n            }\n        }\n    },\n   \"retry\": {\n    \"buttonLook\": \"FILLED\",\n    \"display\": \"Retry Data Validation\",\n    \"icon\": \"ARROW\",\n    \"id\": \"retry\",\n    \"request\": {\n      \"apiEndPoint\": {\n        \"apiUrl\": cloudElementsUrl+\"/pipedrive/validateSetup\",\n        \"headers\": {\n          \"Elements-Formula-Instance-Id\": validationSetupInstanceId\n        },\n        \"input\": {\n          \"retry\": \"true\",\n          \"integrationName\": \"pipedrive\"\n        },\n        \"type\": \"GET\"\n      },\n      \"type\": \"ON_CLICK_DEFAULT_ACTION\"\n    },\n    \"type\": \"DIRECT_LINK\"\n  }\n}\ndone({\n statusCode: 200,\n result: card\n})\n"}}],"triggers":[{"id":26039,"onSuccess":["InputParams"],"onFailure":[],"type":"manual","async":true,"name":"trigger","properties":{}}],"method":"GET","uri":"/pipedrive/validateIgnore","engine":"v1","active":true,"debugLoggingEnabled":true,"singleThreaded":false,"api":"GET /pipedrive/validateIgnore","configuration":[]}