{"id":29404,"name":"testing-pipedriveSyncRulesContactsSetup_DynamicComponent","userId":27893,"accountId":24428,"createdDate":"2019-09-05T06:57:16Z","steps":[{"id":223108,"onSuccess":["Success"],"onFailure":[],"name":"EnvProps","type":"script","properties":{"body":"let cloudElementsUrl = \"https://staging.cloud-elements.com/elements/api-v2\";\n\ndone({\n  cloudElementsUrl: cloudElementsUrl\n});"}},{"id":215700,"onSuccess":[],"onFailure":[],"name":"Success","type":"script","properties":{"body":"let cloudElementsUrl = steps.EnvProps.cloudElementsUrl;\nlet instanceId = info.formulaInstanceId;\nlet siteDomain = trigger.args.request.query['cb-domain'];\nlet integrationName = \"pipedrive\";\n\nlet manageOrganizationInPipedrive = (trigger.args.request.query['manageOrganizationInPipedrive'] !== undefined) ? trigger.args.request.query['manageOrganizationInPipedrive'] : \"false\";\n\nlet card;\n\nif(manageOrganizationInPipedrive === \"true\"){\n    card = {\n     \"cards\" : [\n        {\n           \"card\": {\n              \"type\" : \"DYNAMIC_INPUT\",\n              \"params\": [\n                 {       \n                  \"dispName\":\"Allow Chargebee to create 'People' in Pipedrive\",\n                        \"desc\":\"By default, existing people, if any, will be updated with the changes made in Chargebee. Disable if you dont want chargebee to create 'People' in Pipedrive. <a href=\\\"https://www.chargebee.com\\\" target=\\\"blank\\\">Learn More</a>\",\n                    \"type\":\"DROPDOWN_DYNAMIC\",\n                    \"id\":\"createPeopleInPipedrive\",\n                    \"dropDownItemsList\":[\n                        {\n                        \"value\":\"true\",\n                            \"disp\":\"Create person\"\n                        },\n                        {\n                        \"value\":\"false\",\n                            \"disp\":\"Do nothing\"\n                        }\n                    ],\n                  \"defaultVal\": trigger.args.request.query['createPeopleInPipedrive'] !== undefined ? trigger.args.request.query['createPeopleInPipedrive'] : \"true\",\n                  \"isSeperator\":true\n                },\n                {       \n                  \"dispName\":\"Allow Chargebee to manage 'Organization' in Pipedrive\",\n                  \"desc\":\"By default, Chargebee customers will be synced as 'People' in Pipedrive. Enable if you want to allow Chargebee to add people to 'Organization', and create and update Organizations in Pipedrive. <a href=\\\"https://www.chargebee.com\\\" target=\\\"blank\\\">Learn More</a>\",\n                  \"type\":\"TOGGLE\",\n                  \"id\":\"manageOrganizationInPipedrive\",\n                  \"defaultVal\":manageOrganizationInPipedrive,\n                  \"isDynamic\":\"true\",\n                  \"request\":{\n                    \"type\":\"ON_CHANGE_FETCH_INPUT\",\n                    \"apiEndPoint\":{\n                      \"apiUrl\":cloudElementsUrl+\"/pipedrive/getOrganizationSettings\",\n                      \"type\":\"GET\",\n                      \"headers\":{\n                        \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                        \"Elements-Formula-Instance-Id\": instanceId\n                      },\n                      \"input\":{\n                        \"card\":\"subscription\"\n                      }\n                    }\n                  }\n               },\n              // {  \n              //   \"dispName\":\"Choose what you'd like to do when a customer is synced to Pipedrive\",\n              //   \"type\":\"DROPDOWN\",\n              //   \"id\":\"actionCustomerSyncedToPipedrive\",\n              //   \"allowedValues\":{\n              //       \"option1\":\"Group using 'Organization' name\",\n              //       \"option2\":\"Create a new Organization\"\n              //   },\n              //     \"defaultVal\":\"option1\"\n              // },\n               {  \n                  \"dispName\":\"Choose the contact in Pipedrive you'd like to sync subscription details with\",\n                  \"desc\": \"You can choose to add subscription details like plan name, MRR, status, etc., to 'Organization' or 'People'.\",\n                 \"type\":\"DROPDOWN\",\n                 \"id\":\"linkSubAttributesToPerson\",\n                 \"allowedValues\":{\n                    \"option1\":\"People\",\n                    \"option2\":\"Organization\"\n                 },\n                  \"defaultVal\":\"option1\"\n               },\n              // {       \n              //     \"dispName\":\"Sync Account Hierarchies from Chargebee to Pipedrive\",\n              //   \"desc\":\"Enable if you want to sync hierarchical account relationships from Chargebee as related organization in Pipedrive. <a href=\\\"https://www.chargebee.com\\\" target=\\\"blank\\\">Learn More</a>\",\n              //     \"type\":\"TOGGLE\",\n              //     \"id\":\"syncAccountHierarchies\",\n              //     \"defaultVal\":false,\n              //     \"isSeperator\":true\n              // },\n               {  \n                \"dispName\":\"When a customer is deleted in Chargebee\",\n                 \"type\":\"DROPDOWN_DYNAMIC\",\n                 \"id\":\"customerDeletedInCB\",\n                 \"dropDownItemsList\":[\n                         {\n                          \"value\":\"option1\",\n                            \"disp\":\"Do Nothing\"\n                         },\n                         {\n                          \"value\":\"option2\",\n                            \"disp\":\"Mark 'Person'as 'Deleted'\"\n                         },\n                         {\n                          \"value\":\"option3\",\n                            \"disp\":\"Mark 'Person' and 'Organization' as 'Deleted'\",\n                            \"helptext\":\"If there are multiple 'People' in the 'Organization', then 'Organization' will not be marked as 'Deleted'.\"\n                         }\n                 ],\n                  \"defaultVal\": trigger.args.request.query['customerDeletedInCB'] !== undefined ? trigger.args.request.query['customerDeletedInCB'] : \"option2\"\n              }\n              ]\n           },\n           \"id\" : \"check2\",\n           \"isCardDone\":\"true\"\n        }\n      ]\n  };\n}else{\n  card = {\n     \"cards\" : [\n        {\n           \"card\": {\n              \"type\" : \"DYNAMIC_INPUT\",\n              \"params\": [\n                 {       \n                  \"dispName\":\"Allow Chargebee to create 'People' in Pipedrive\",\n                        \"desc\":\"By default, existing people, if any, will be updated with the changes made in Chargebee. Disable if you dont want chargebee to create 'People' in Pipedrive. <a href=\\\"https://www.chargebee.com\\\" target=\\\"blank\\\">Learn More</a>\",\n                    \"type\":\"DROPDOWN_DYNAMIC\",\n                    \"id\":\"createPeopleInPipedrive\",\n                    \"dropDownItemsList\":[\n                        {\n                        \"value\":\"true\",\n                            \"disp\":\"Create person\"\n                        },\n                        {\n                        \"value\":\"false\",\n                            \"disp\":\"Do nothing\"\n                        }\n                    ],\n                  \"defaultVal\": trigger.args.request.query['createPeopleInPipedrive'] !== undefined ? trigger.args.request.query['createPeopleInPipedrive'] : \"true\",\n                  \"isSeperator\":true\n                },\n                {       \n                  \"dispName\":\"Allow Chargebee to manage 'Organization' in Pipedrive\",\n                  \"desc\":\"By default, Chargebee customers will be synced as 'People' in Pipedrive. Enable if you want to allow Chargebee to add people to 'Organization', and create and update Organizations in Pipedrive. <a href=\\\"https://www.chargebee.com\\\" target=\\\"blank\\\">Learn More</a>\",\n                  \"type\":\"TOGGLE\",\n                  \"id\":\"manageOrganizationInPipedrive\",\n                  \"defaultVal\":manageOrganizationInPipedrive,\n                  \"isSeperator\":true,\n                  \"isDynamic\":\"true\",\n                  \"request\":{\n                    \"type\":\"ON_CHANGE_FETCH_INPUT\",\n                    \"apiEndPoint\":{\n                      \"apiUrl\":cloudElementsUrl+\"/pipedrive/getOrganizationSettings\",\n                      \"type\":\"GET\",\n                      \"headers\":{\n                        \"Authorization\":\"User XNzP5miZ8LjANZarWA0np2LmNeRkUanHScUEQmQHwDs=, Organization c9584f9cc4a4c8391568438a9a3041a2\",\n                        \"Elements-Formula-Instance-Id\": instanceId\n                      },\n                      \"input\":{\n                        \"card\":\"subscription\"\n                      }\n                    }\n                  }\n               },\n               {  \n                \"dispName\":\"When a customer is deleted in Chargebee\",\n                 \"type\":\"DROPDOWN_DYNAMIC\",\n                 \"id\":\"customerDeletedInCB\",\n                 \"dropDownItemsList\":[\n                         {\n                          \"value\":\"option1\",\n                            \"disp\":\"Do Nothing\"\n                         },\n                         {\n                          \"value\":\"option2\",\n                            \"disp\":\"Mark 'Person'as 'Deleted'\"\n                         }\n                 ],\n                  \"defaultVal\": trigger.args.request.query['customerDeletedInCB'] !== undefined ? trigger.args.request.query['customerDeletedInCB'] : \"option2\"\n              }\n              ]\n           },\n           \"id\" : \"check2\",\n           \"isCardDone\":\"true\"\n        }\n      ]\n  };\n}\n\n\n\ndone({\n  result: card\n});"}}],"triggers":[{"id":26032,"onSuccess":["EnvProps"],"onFailure":[],"type":"manual","async":true,"name":"trigger","properties":{}}],"method":"GET","uri":"/pipedrive/getOrganizationSettings","engine":"v1","active":true,"debugLoggingEnabled":true,"singleThreaded":false,"api":"GET /pipedrive/getOrganizationSettings","configuration":[]}